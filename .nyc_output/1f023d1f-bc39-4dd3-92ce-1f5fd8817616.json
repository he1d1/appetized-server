{"/usr/local/src/appetized-server/src/prisma.ts":{"path":"/usr/local/src/appetized-server/src/prisma.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":45}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":33}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/prisma.ts","sources":["/usr/local/src/appetized-server/src/prisma.ts"],"names":[],"mappings":";;;AAAA,2CAA8C;AAEjC,QAAA,MAAM,GAAG,IAAI,qBAAY,EAAE,CAAC;AACzC,kBAAe,cAAM,CAAC","sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nexport const prisma = new PrismaClient();\nexport default prisma;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"42b29d232c78265cc0bbd2ba97ba4e3cde7248f0","contentHash":"b3677ba894c6e053264dcc726a6e2e29d6635307ada52686db7e1c62f5fbf2af"},"/usr/local/src/appetized-server/src/schema/resolvers.ts":{"path":"/usr/local/src/appetized-server/src/schema/resolvers.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":16},"end":{"line":6,"column":51}},"4":{"start":{"line":7,"column":20},"end":{"line":7,"column":59}},"5":{"start":{"line":8,"column":15},"end":{"line":8,"column":49}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":53}},"7":{"start":{"line":10,"column":0},"end":{"line":69,"column":2}},"8":{"start":{"line":17,"column":12},"end":{"line":22,"column":13}},"9":{"start":{"line":18,"column":16},"end":{"line":18,"column":31}},"10":{"start":{"line":21,"column":16},"end":{"line":21,"column":30}},"11":{"start":{"line":27,"column":12},"end":{"line":32,"column":13}},"12":{"start":{"line":28,"column":16},"end":{"line":28,"column":31}},"13":{"start":{"line":31,"column":16},"end":{"line":31,"column":31}},"14":{"start":{"line":37,"column":12},"end":{"line":42,"column":13}},"15":{"start":{"line":38,"column":16},"end":{"line":38,"column":31}},"16":{"start":{"line":41,"column":16},"end":{"line":41,"column":32}},"17":{"start":{"line":47,"column":12},"end":{"line":52,"column":13}},"18":{"start":{"line":48,"column":16},"end":{"line":48,"column":31}},"19":{"start":{"line":51,"column":16},"end":{"line":51,"column":36}},"20":{"start":{"line":57,"column":12},"end":{"line":62,"column":13}},"21":{"start":{"line":58,"column":16},"end":{"line":58,"column":31}},"22":{"start":{"line":61,"column":16},"end":{"line":61,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":16,"column":8},"end":{"line":16,"column":9}},"loc":{"start":{"line":16,"column":28},"end":{"line":23,"column":9}},"line":16},"2":{"name":"(anonymous_2)","decl":{"start":{"line":26,"column":8},"end":{"line":26,"column":9}},"loc":{"start":{"line":26,"column":29},"end":{"line":33,"column":9}},"line":26},"3":{"name":"(anonymous_3)","decl":{"start":{"line":36,"column":8},"end":{"line":36,"column":9}},"loc":{"start":{"line":36,"column":30},"end":{"line":43,"column":9}},"line":36},"4":{"name":"(anonymous_4)","decl":{"start":{"line":46,"column":8},"end":{"line":46,"column":9}},"loc":{"start":{"line":46,"column":30},"end":{"line":53,"column":9}},"line":46},"5":{"name":"(anonymous_5)","decl":{"start":{"line":56,"column":8},"end":{"line":56,"column":9}},"loc":{"start":{"line":56,"column":30},"end":{"line":63,"column":9}},"line":56}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":17,"column":12},"end":{"line":22,"column":13}},"type":"if","locations":[{"start":{"line":17,"column":12},"end":{"line":22,"column":13}},{"start":{"line":17,"column":12},"end":{"line":22,"column":13}}],"line":17},"4":{"loc":{"start":{"line":27,"column":12},"end":{"line":32,"column":13}},"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":32,"column":13}},{"start":{"line":27,"column":12},"end":{"line":32,"column":13}}],"line":27},"5":{"loc":{"start":{"line":37,"column":12},"end":{"line":42,"column":13}},"type":"if","locations":[{"start":{"line":37,"column":12},"end":{"line":42,"column":13}},{"start":{"line":37,"column":12},"end":{"line":42,"column":13}}],"line":37},"6":{"loc":{"start":{"line":47,"column":12},"end":{"line":52,"column":13}},"type":"if","locations":[{"start":{"line":47,"column":12},"end":{"line":52,"column":13}},{"start":{"line":47,"column":12},"end":{"line":52,"column":13}}],"line":47},"7":{"loc":{"start":{"line":57,"column":12},"end":{"line":62,"column":13}},"type":"if","locations":[{"start":{"line":57,"column":12},"end":{"line":62,"column":13}},{"start":{"line":57,"column":12},"end":{"line":62,"column":13}}],"line":57}},"s":{"0":1,"1":4,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},"f":{"0":4,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[1,1,1],"1":[4,0],"2":[4,4],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/resolvers.ts","sources":["/usr/local/src/appetized-server/src/schema/resolvers.ts"],"names":[],"mappings":";;;;;AAAA,oDAA4B;AAC5B,4DAAmC;AACnC,kDAA0B;AAC1B,sDAA8B;AAE9B,kBAAe;IACb,KAAK,oBACA,eAAK,CACT;IACD,QAAQ,oBACH,mBAAQ,CACZ;IACD,IAAI,oBACC,cAAI,CACR;IACD,MAAM,oBACD,gBAAM,CACV;IACD,YAAY,EAAE;QACZ,aAAa,CAAC,IAAsB;YAClC,IAAI,IAAI,CAAC,IAAI,EAAE;gBACb,OAAO,OAAO,CAAC;aAChB;iBAAM;gBACL,OAAO,MAAM,CAAC;aACf;QACH,CAAC;KACF;IACD,aAAa,EAAE;QACb,aAAa,CAAC,KAAuB;YACnC,IAAI,KAAK,CAAC,IAAI,EAAE;gBACd,OAAO,OAAO,CAAC;aAChB;iBAAM;gBACL,OAAO,OAAO,CAAC;aAChB;QACH,CAAC;KACF;IACD,cAAc,EAAE;QACd,aAAa,CAAC,MAAwB;YACpC,IAAI,MAAM,CAAC,IAAI,EAAE;gBACf,OAAO,OAAO,CAAC;aAChB;iBAAM;gBACL,OAAO,QAAQ,CAAC;aACjB;QACH,CAAC;KACF;IACD,kBAAkB,EAAE;QAClB,aAAa,CAAC,MAAwB;YACpC,IAAI,MAAM,CAAC,IAAI,EAAE;gBACf,OAAO,OAAO,CAAC;aAChB;iBAAM;gBACL,OAAO,YAAY,CAAC;aACrB;QACH,CAAC;KACF;IACD,YAAY,EAAE;QACZ,aAAa,CAAC,MAAwB;YACpC,IAAI,MAAM,CAAC,IAAI,EAAE;gBACf,OAAO,OAAO,CAAC;aAChB;iBAAM;gBACL,OAAO,MAAM,CAAC;aACf;QACH,CAAC;KACF;IACD,SAAS,EAAE;QACT,GAAG,EAAE,KAAK;QACV,IAAI,EAAE,MAAM;KACb;CACF,CAAC","sourcesContent":["import query from \"./query\";\nimport mutation from \"./mutations\";\nimport user from \"./user\";\nimport recipe from \"./recipe\";\n\nexport default {\n  Query: {\n    ...query,\n  },\n  Mutation: {\n    ...mutation,\n  },\n  User: {\n    ...user,\n  },\n  Recipe: {\n    ...recipe,\n  },\n  UserResponse: {\n    __resolveType(user: { code: number }) {\n      if (user.code) {\n        return \"Error\";\n      } else {\n        return \"User\";\n      }\n    },\n  },\n  ImageResponse: {\n    __resolveType(image: { code: number }) {\n      if (image.code) {\n        return \"Error\";\n      } else {\n        return \"Image\";\n      }\n    },\n  },\n  RecipeResponse: {\n    __resolveType(recipe: { code: number }) {\n      if (recipe.code) {\n        return \"Error\";\n      } else {\n        return \"Recipe\";\n      }\n    },\n  },\n  IngredientResponse: {\n    __resolveType(recipe: { code: number }) {\n      if (recipe.code) {\n        return \"Error\";\n      } else {\n        return \"Ingredient\";\n      }\n    },\n  },\n  StepResponse: {\n    __resolveType(recipe: { code: number }) {\n      if (recipe.code) {\n        return \"Error\";\n      } else {\n        return \"Step\";\n      }\n    },\n  },\n  Direction: {\n    ASC: \"asc\",\n    DESC: \"desc\",\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cd777520df3c161c4f979c155064447ee84911c0","contentHash":"6baa43247f7a305b1047bd5bc69c7ab94533284d93af3b75b6b6a82a26b09603"},"/usr/local/src/appetized-server/src/schema/query/index.ts":{"path":"/usr/local/src/appetized-server/src/schema/query/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":57}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":53}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":89}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1},"f":{"0":2},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/query/index.ts","sources":["/usr/local/src/appetized-server/src/schema/query/index.ts"],"names":[],"mappings":";;;;;AAAA,0DAAkC;AAClC,sDAA8B;AAE9B,kDACK,kBAAQ,GACR,gBAAM,EACT","sourcesContent":["import singular from \"./singular\";\nimport plural from \"./plural\";\n\nexport default {\n  ...singular,\n  ...plural,\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e9e7c101c991ec9e3131b8cc785afcc24253d453","contentHash":"30cac5c3d949595b279bae3ad5ef0ae1fea728bb563af3075006782861cf586c"},"/usr/local/src/appetized-server/src/schema/query/singular.ts":{"path":"/usr/local/src/appetized-server/src/schema/query/singular.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":0},"end":{"line":76,"column":2}},"3":{"start":{"line":7,"column":8},"end":{"line":40,"column":9}},"4":{"start":{"line":8,"column":12},"end":{"line":14,"column":15}},"5":{"start":{"line":16,"column":13},"end":{"line":40,"column":9}},"6":{"start":{"line":17,"column":12},"end":{"line":23,"column":15}},"7":{"start":{"line":25,"column":13},"end":{"line":40,"column":9}},"8":{"start":{"line":26,"column":12},"end":{"line":32,"column":15}},"9":{"start":{"line":35,"column":12},"end":{"line":39,"column":14}},"10":{"start":{"line":44,"column":8},"end":{"line":50,"column":11}},"11":{"start":{"line":54,"column":8},"end":{"line":58,"column":11}},"12":{"start":{"line":62,"column":8},"end":{"line":66,"column":11}},"13":{"start":{"line":70,"column":8},"end":{"line":74,"column":11}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":10},"end":{"line":5,"column":11}},"loc":{"start":{"line":5,"column":62},"end":{"line":41,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":42,"column":12},"end":{"line":42,"column":13}},"loc":{"start":{"line":42,"column":40},"end":{"line":51,"column":5}},"line":42},"2":{"name":"(anonymous_2)","decl":{"start":{"line":52,"column":11},"end":{"line":52,"column":12}},"loc":{"start":{"line":52,"column":39},"end":{"line":59,"column":5}},"line":52},"3":{"name":"(anonymous_3)","decl":{"start":{"line":60,"column":10},"end":{"line":60,"column":11}},"loc":{"start":{"line":60,"column":38},"end":{"line":67,"column":5}},"line":60},"4":{"name":"(anonymous_4)","decl":{"start":{"line":68,"column":16},"end":{"line":68,"column":17}},"loc":{"start":{"line":68,"column":44},"end":{"line":75,"column":5}},"line":68}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":17},"end":{"line":5,"column":25}},"type":"default-arg","locations":[{"start":{"line":5,"column":21},"end":{"line":5,"column":25}}],"line":5},"1":{"loc":{"start":{"line":7,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":7,"column":8},"end":{"line":40,"column":9}},{"start":{"line":7,"column":8},"end":{"line":40,"column":9}}],"line":7},"2":{"loc":{"start":{"line":8,"column":20},"end":{"line":14,"column":13}},"type":"cond-expr","locations":[{"start":{"line":10,"column":45},"end":{"line":10,"column":47}},{"start":{"line":10,"column":50},"end":{"line":14,"column":13}}],"line":8},"3":{"loc":{"start":{"line":8,"column":20},"end":{"line":10,"column":42}},"type":"binary-expr","locations":[{"start":{"line":8,"column":20},"end":{"line":10,"column":25}},{"start":{"line":10,"column":29},"end":{"line":10,"column":42}}],"line":8},"4":{"loc":{"start":{"line":16,"column":13},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":16,"column":13},"end":{"line":40,"column":9}},{"start":{"line":16,"column":13},"end":{"line":40,"column":9}}],"line":16},"5":{"loc":{"start":{"line":17,"column":20},"end":{"line":23,"column":13}},"type":"cond-expr","locations":[{"start":{"line":19,"column":45},"end":{"line":19,"column":47}},{"start":{"line":19,"column":50},"end":{"line":23,"column":13}}],"line":17},"6":{"loc":{"start":{"line":17,"column":20},"end":{"line":19,"column":42}},"type":"binary-expr","locations":[{"start":{"line":17,"column":20},"end":{"line":19,"column":25}},{"start":{"line":19,"column":29},"end":{"line":19,"column":42}}],"line":17},"7":{"loc":{"start":{"line":25,"column":13},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":25,"column":13},"end":{"line":40,"column":9}},{"start":{"line":25,"column":13},"end":{"line":40,"column":9}}],"line":25},"8":{"loc":{"start":{"line":26,"column":20},"end":{"line":32,"column":13}},"type":"cond-expr","locations":[{"start":{"line":28,"column":45},"end":{"line":28,"column":47}},{"start":{"line":28,"column":50},"end":{"line":32,"column":13}}],"line":26},"9":{"loc":{"start":{"line":26,"column":20},"end":{"line":28,"column":42}},"type":"binary-expr","locations":[{"start":{"line":26,"column":20},"end":{"line":28,"column":25}},{"start":{"line":28,"column":29},"end":{"line":28,"column":42}}],"line":26},"10":{"loc":{"start":{"line":42,"column":19},"end":{"line":42,"column":27}},"type":"default-arg","locations":[{"start":{"line":42,"column":23},"end":{"line":42,"column":27}}],"line":42},"11":{"loc":{"start":{"line":44,"column":16},"end":{"line":50,"column":9}},"type":"cond-expr","locations":[{"start":{"line":46,"column":41},"end":{"line":46,"column":43}},{"start":{"line":46,"column":46},"end":{"line":50,"column":9}}],"line":44},"12":{"loc":{"start":{"line":44,"column":16},"end":{"line":46,"column":38}},"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":46,"column":21}},{"start":{"line":46,"column":25},"end":{"line":46,"column":38}}],"line":44},"13":{"loc":{"start":{"line":52,"column":18},"end":{"line":52,"column":26}},"type":"default-arg","locations":[{"start":{"line":52,"column":22},"end":{"line":52,"column":26}}],"line":52},"14":{"loc":{"start":{"line":54,"column":16},"end":{"line":58,"column":9}},"type":"cond-expr","locations":[{"start":{"line":54,"column":115},"end":{"line":54,"column":117}},{"start":{"line":54,"column":120},"end":{"line":58,"column":9}}],"line":54},"15":{"loc":{"start":{"line":54,"column":16},"end":{"line":54,"column":112}},"type":"binary-expr","locations":[{"start":{"line":54,"column":16},"end":{"line":54,"column":95}},{"start":{"line":54,"column":99},"end":{"line":54,"column":112}}],"line":54},"16":{"loc":{"start":{"line":60,"column":17},"end":{"line":60,"column":25}},"type":"default-arg","locations":[{"start":{"line":60,"column":21},"end":{"line":60,"column":25}}],"line":60},"17":{"loc":{"start":{"line":62,"column":16},"end":{"line":66,"column":9}},"type":"cond-expr","locations":[{"start":{"line":62,"column":114},"end":{"line":62,"column":116}},{"start":{"line":62,"column":119},"end":{"line":66,"column":9}}],"line":62},"18":{"loc":{"start":{"line":62,"column":16},"end":{"line":62,"column":111}},"type":"binary-expr","locations":[{"start":{"line":62,"column":16},"end":{"line":62,"column":94}},{"start":{"line":62,"column":98},"end":{"line":62,"column":111}}],"line":62},"19":{"loc":{"start":{"line":68,"column":23},"end":{"line":68,"column":31}},"type":"default-arg","locations":[{"start":{"line":68,"column":27},"end":{"line":68,"column":31}}],"line":68},"20":{"loc":{"start":{"line":70,"column":16},"end":{"line":74,"column":9}},"type":"cond-expr","locations":[{"start":{"line":70,"column":120},"end":{"line":70,"column":122}},{"start":{"line":70,"column":125},"end":{"line":74,"column":9}}],"line":70},"21":{"loc":{"start":{"line":70,"column":16},"end":{"line":70,"column":117}},"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":100}},{"start":{"line":70,"column":104},"end":{"line":70,"column":117}}],"line":70}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0},"b":{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0],"11":[0,0],"12":[0,0],"13":[0],"14":[0,0],"15":[0,0],"16":[0],"17":[0,0],"18":[0,0],"19":[0],"20":[0,0],"21":[0,0]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/query/singular.ts","sources":["/usr/local/src/appetized-server/src/schema/query/singular.ts"],"names":[],"mappings":"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","sourcesContent":["import { prisma } from \"../../prisma\";\n\nexport default {\n  user: async (\n    _ = null,\n    { id, username }: { id: string; username: string },\n    { id: uuid }: { id: string }\n  ) => {\n    if (id) {\n      return (\n        (await prisma.user.findUnique({\n          where: { id: id },\n        })) ?? {\n          // Id is not found\n          code: 404,\n          message: \"User not found\",\n        }\n      );\n    } else if (username) {\n      return (\n        (await prisma.user.findUnique({\n          where: { username: username },\n        })) ?? {\n          // Username is not found\n          code: 404,\n          message: \"User not found\",\n        }\n      );\n    } else if (uuid) {\n      return (\n        (await prisma.user.findUnique({\n          where: { id: uuid },\n        })) ?? {\n          // Something is very broken\n          code: 500,\n          message: \"Something is very broken\",\n        }\n      );\n    } else {\n      return {\n        // Not logged in and no user provided.\n        code: 401,\n        message: \"Not logged in and no user provided.\",\n      };\n    }\n  },\n  recipe: async (_ = null, { id }: { id: string }) => {\n    return (\n      (await prisma.recipe.findUnique({\n        where: { id: id },\n      })) ?? {\n        // Id is not found\n        code: 404,\n        message: \"Recipe not found\",\n      }\n    );\n  },\n  image: async (_ = null, { id }: { id: string }) => {\n    return (\n      (await prisma.image.findUnique({ where: { id: id } })) ?? {\n        // Id is not found\n        code: 404,\n        message: \"Image not found\",\n      }\n    );\n  },\n  step: async (_ = null, { id }: { id: string }) => {\n    return (\n      (await prisma.step.findUnique({ where: { id: id } })) ?? {\n        // Id is not found\n        code: 404,\n        message: \"Step not found\",\n      }\n    );\n  },\n  ingredient: async (_ = null, { id }: { id: string }) => {\n    return (\n      (await prisma.ingredient.findUnique({ where: { id: id } })) ?? {\n        // Id is not found\n        code: 404,\n        message: \"Ingredient not found\",\n      }\n    );\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f7bf188d28b5690ed9f8a9f037639ee8e5e3927a","contentHash":"197f982934c342819ce4fbbb60a681dfa237fc09836d8de28a23abe345315195"},"/usr/local/src/appetized-server/src/schema/query/plural.ts":{"path":"/usr/local/src/appetized-server/src/schema/query/plural.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":0},"end":{"line":90,"column":2}},"3":{"start":{"line":6,"column":8},"end":{"line":24,"column":11}},"4":{"start":{"line":27,"column":8},"end":{"line":55,"column":11}},"5":{"start":{"line":58,"column":8},"end":{"line":76,"column":11}},"6":{"start":{"line":79,"column":8},"end":{"line":88,"column":11}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":11},"end":{"line":5,"column":12}},"loc":{"start":{"line":5,"column":79},"end":{"line":25,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":14}},"loc":{"start":{"line":26,"column":81},"end":{"line":56,"column":5}},"line":26},"2":{"name":"(anonymous_2)","decl":{"start":{"line":57,"column":11},"end":{"line":57,"column":12}},"loc":{"start":{"line":57,"column":79},"end":{"line":77,"column":5}},"line":57},"3":{"name":"(anonymous_3)","decl":{"start":{"line":78,"column":17},"end":{"line":78,"column":18}},"loc":{"start":{"line":78,"column":85},"end":{"line":89,"column":5}},"line":78}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":26}},"type":"default-arg","locations":[{"start":{"line":5,"column":22},"end":{"line":5,"column":26}}],"line":5},"1":{"loc":{"start":{"line":22,"column":20},"end":{"line":22,"column":51}},"type":"cond-expr","locations":[{"start":{"line":22,"column":27},"end":{"line":22,"column":39}},{"start":{"line":22,"column":42},"end":{"line":22,"column":51}}],"line":22},"2":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":28}},"type":"default-arg","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":28}}],"line":26},"3":{"loc":{"start":{"line":53,"column":20},"end":{"line":53,"column":51}},"type":"cond-expr","locations":[{"start":{"line":53,"column":27},"end":{"line":53,"column":39}},{"start":{"line":53,"column":42},"end":{"line":53,"column":51}}],"line":53},"4":{"loc":{"start":{"line":57,"column":18},"end":{"line":57,"column":26}},"type":"default-arg","locations":[{"start":{"line":57,"column":22},"end":{"line":57,"column":26}}],"line":57},"5":{"loc":{"start":{"line":74,"column":20},"end":{"line":74,"column":51}},"type":"cond-expr","locations":[{"start":{"line":74,"column":27},"end":{"line":74,"column":39}},{"start":{"line":74,"column":42},"end":{"line":74,"column":51}}],"line":74},"6":{"loc":{"start":{"line":78,"column":24},"end":{"line":78,"column":32}},"type":"default-arg","locations":[{"start":{"line":78,"column":28},"end":{"line":78,"column":32}}],"line":78},"7":{"loc":{"start":{"line":86,"column":20},"end":{"line":86,"column":51}},"type":"cond-expr","locations":[{"start":{"line":86,"column":27},"end":{"line":86,"column":39}},{"start":{"line":86,"column":42},"end":{"line":86,"column":51}}],"line":86}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0],"1":[0,0],"2":[0],"3":[0,0],"4":[0],"5":[0,0],"6":[0],"7":[0,0]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/query/plural.ts","sources":["/usr/local/src/appetized-server/src/schema/query/plural.ts"],"names":[],"mappings":";;AAAA,yCAAsC;AAEtC,kBAAe;IACb,KAAK,EAAE,KAAK,EACV,CAAC,GAAG,IAAI,EACR,EACE,KAAK,EACL,IAAI,EACJ,IAAI,EACJ,IAAI,GACqD,EAC3D,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAsC,EACpD,EAAE;QACF,OAAO,MAAM,eAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YAChC,KAAK,EAAE;gBACL,EAAE,EAAE;oBACF;wBACE,IAAI,EAAE;4BACJ,MAAM,EAAE,KAAK;yBACd;qBACF;oBACD;wBACE,QAAQ,EAAE;4BACR,MAAM,EAAE,KAAK;yBACd;qBACF;iBACF;aACF;YACD,IAAI;YACJ,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS;YACvC,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC;IACD,OAAO,EAAE,KAAK,EACZ,CAAC,GAAG,IAAI,EACR,EACE,KAAK,EACL,IAAI,EACJ,IAAI,EACJ,IAAI,GACqD,EAC3D,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAsC,EACpD,EAAE;QACF,OAAO,MAAM,eAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;YAClC,KAAK,EAAE;gBACL,EAAE,EAAE;oBACF;wBACE,IAAI,EAAE;4BACJ,MAAM,EAAE,KAAK;yBACd;qBACF;oBACD;wBACE,WAAW,EAAE;4BACX,MAAM,EAAE,KAAK;yBACd;qBACF;oBACD;wBACE,OAAO,EAAE;4BACP,MAAM,EAAE,KAAK;yBACd;qBACF;oBACD;wBACE,QAAQ,EAAE;4BACR,MAAM,EAAE,KAAK;yBACd;qBACF;iBACF;aACF;YACD,IAAI;YACJ,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS;YACvC,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC;IACD,KAAK,EAAE,KAAK,EACV,CAAC,GAAG,IAAI,EACR,EACE,KAAK,EACL,IAAI,EACJ,IAAI,EACJ,IAAI,GACqD,EAC3D,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAsC,EACpD,EAAE;QACF,OAAO,MAAM,eAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YAChC,KAAK,EAAE;gBACL,EAAE,EAAE;oBACF;wBACE,IAAI,EAAE;4BACJ,MAAM,EAAE,KAAK;yBACd;qBACF;oBACD;wBACE,OAAO,EAAE;4BACP,MAAM,EAAE,KAAK;yBACd;qBACF;iBACF;aACF;YACD,IAAI;YACJ,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS;YACvC,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC;IACD,WAAW,EAAE,KAAK,EAChB,CAAC,GAAG,IAAI,EACR,EACE,KAAK,EACL,IAAI,EACJ,IAAI,EACJ,IAAI,GACqD,EAC3D,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAsC,EACpD,EAAE;QACF,OAAO,MAAM,eAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;YACtC,KAAK,EAAE;gBACL,IAAI,EAAE;oBACJ,MAAM,EAAE,KAAK;iBACd;aACF;YACD,IAAI;YACJ,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS;YACvC,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC;CACF,CAAC","sourcesContent":["import { prisma } from \"../../prisma\";\n\nexport default {\n  users: async (\n    _ = null,\n    {\n      query,\n      take,\n      from,\n      sort,\n    }: { query: string; take: number; from: string; sort: any },\n    { req, res, id }: { req: any; res: any; id: string }\n  ) => {\n    return await prisma.user.findMany({\n      where: {\n        OR: [\n          {\n            name: {\n              search: query,\n            },\n          },\n          {\n            username: {\n              search: query,\n            },\n          },\n        ],\n      },\n      take,\n      cursor: from ? { id: from } : undefined,\n      orderBy: sort,\n    });\n  },\n  recipes: async (\n    _ = null,\n    {\n      query,\n      take,\n      from,\n      sort,\n    }: { query: string; take: number; from: string; sort: any },\n    { req, res, id }: { req: any; res: any; id: string }\n  ) => {\n    return await prisma.recipe.findMany({\n      where: {\n        OR: [\n          {\n            name: {\n              search: query,\n            },\n          },\n          {\n            description: {\n              search: query,\n            },\n          },\n          {\n            cuisine: {\n              search: query,\n            },\n          },\n          {\n            category: {\n              search: query,\n            },\n          },\n        ],\n      },\n      take,\n      cursor: from ? { id: from } : undefined,\n      orderBy: sort,\n    });\n  },\n  steps: async (\n    _ = null,\n    {\n      query,\n      take,\n      from,\n      sort,\n    }: { query: string; take: number; from: string; sort: any },\n    { req, res, id }: { req: any; res: any; id: string }\n  ) => {\n    return await prisma.step.findMany({\n      where: {\n        OR: [\n          {\n            name: {\n              search: query,\n            },\n          },\n          {\n            content: {\n              search: query,\n            },\n          },\n        ],\n      },\n      take,\n      cursor: from ? { id: from } : undefined,\n      orderBy: sort,\n    });\n  },\n  ingredients: async (\n    _ = null,\n    {\n      query,\n      take,\n      from,\n      sort,\n    }: { query: string; take: number; from: string; sort: any },\n    { req, res, id }: { req: any; res: any; id: string }\n  ) => {\n    return await prisma.ingredient.findMany({\n      where: {\n        name: {\n          search: query,\n        },\n      },\n      take,\n      cursor: from ? { id: from } : undefined,\n      orderBy: sort,\n    });\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3bf7831e52d1597b40f4920af7a6c609a293473a","contentHash":"b3d376a90598aec8fd69841e1f97f9398df3b1ef7bee7a87d802866f0053a71c"},"/usr/local/src/appetized-server/src/schema/mutations/index.ts":{"path":"/usr/local/src/appetized-server/src/schema/mutations/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":15},"end":{"line":6,"column":49}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":49}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":53}},"6":{"start":{"line":9,"column":21},"end":{"line":9,"column":61}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":49}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":184}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":5,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{"0":5},"b":{"0":[1,1,1],"1":[5,0],"2":[5,5]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/mutations/index.ts","sources":["/usr/local/src/appetized-server/src/schema/mutations/index.ts"],"names":[],"mappings":";;;;;AAAA,kDAA0B;AAC1B,kDAA0B;AAC1B,sDAA8B;AAC9B,8DAAsC;AACtC,kDAA0B;AAE1B,4FACK,cAAI,GACJ,cAAI,GACJ,gBAAM,GACN,oBAAU,GACV,cAAI,EACP","sourcesContent":["import auth from \"./auth\";\nimport user from \"./user\";\nimport recipe from \"./recipe\";\nimport ingredient from \"./ingredient\";\nimport step from \"./step\";\n\nexport default {\n  ...auth,\n  ...user,\n  ...recipe,\n  ...ingredient,\n  ...step,\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"80007a79f65ddd728a6ee12c626e7b3d0f305c51","contentHash":"015eefe6686cd96b892c456651f2663b322915735314e6e3663bd6c045378c07"},"/usr/local/src/appetized-server/src/schema/mutations/auth.ts":{"path":"/usr/local/src/appetized-server/src/schema/mutations/auth.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":51}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":42}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":40}},"6":{"start":{"line":9,"column":0},"end":{"line":52,"column":2}},"7":{"start":{"line":12,"column":22},"end":{"line":14,"column":43}},"8":{"start":{"line":15,"column":21},"end":{"line":15,"column":69}},"9":{"start":{"line":16,"column":8},"end":{"line":21,"column":9}},"10":{"start":{"line":17,"column":12},"end":{"line":20,"column":14}},"11":{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},"12":{"start":{"line":23,"column":12},"end":{"line":26,"column":14}},"13":{"start":{"line":28,"column":8},"end":{"line":37,"column":9}},"14":{"start":{"line":29,"column":12},"end":{"line":29,"column":49}},"15":{"start":{"line":30,"column":12},"end":{"line":30,"column":24}},"16":{"start":{"line":33,"column":12},"end":{"line":36,"column":14}},"17":{"start":{"line":41,"column":20},"end":{"line":41,"column":49}},"18":{"start":{"line":42,"column":8},"end":{"line":47,"column":11}},"19":{"start":{"line":48,"column":8},"end":{"line":48,"column":39}},"20":{"start":{"line":49,"column":8},"end":{"line":49,"column":40}},"21":{"start":{"line":50,"column":8},"end":{"line":50,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":15},"end":{"line":10,"column":16}},"loc":{"start":{"line":10,"column":80},"end":{"line":38,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":39,"column":16},"end":{"line":39,"column":17}},"loc":{"start":{"line":39,"column":53},"end":{"line":51,"column":5}},"line":39}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":30}},"type":"default-arg","locations":[{"start":{"line":10,"column":26},"end":{"line":10,"column":30}}],"line":10},"4":{"loc":{"start":{"line":12,"column":22},"end":{"line":14,"column":43}},"type":"cond-expr","locations":[{"start":{"line":13,"column":14},"end":{"line":13,"column":40}},{"start":{"line":14,"column":14},"end":{"line":14,"column":43}}],"line":12},"5":{"loc":{"start":{"line":16,"column":8},"end":{"line":21,"column":9}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":21,"column":9}},{"start":{"line":16,"column":8},"end":{"line":21,"column":9}}],"line":16},"6":{"loc":{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},{"start":{"line":22,"column":8},"end":{"line":27,"column":9}}],"line":22},"7":{"loc":{"start":{"line":28,"column":8},"end":{"line":37,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":37,"column":9}},{"start":{"line":28,"column":8},"end":{"line":37,"column":9}}],"line":28},"8":{"loc":{"start":{"line":39,"column":23},"end":{"line":39,"column":31}},"type":"default-arg","locations":[{"start":{"line":39,"column":27},"end":{"line":39,"column":31}}],"line":39}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"f":{"0":1,"1":0,"2":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/mutations/auth.ts","sources":["/usr/local/src/appetized-server/src/schema/mutations/auth.ts"],"names":[],"mappings":";;;;;AAAA,oDAA4B;AAC5B,2CAAwC;AACxC,yCAAsC;AAEtC,kBAAe;IACb,SAAS,EAAE,KAAK,EACd,CAAC,GAAG,IAAI,EACR,EACE,eAAe,EACf,QAAQ,GACsC,EAChD,EAAE,EAAE,EAAE,GAAG,EAAO,EAChB,EAAE;QACF,kDAAkD;QAClD,MAAM,KAAK,GAAG,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC;YACzC,CAAC,CAAC,EAAE,KAAK,EAAE,eAAe,EAAE;YAC5B,CAAC,CAAC,EAAE,QAAQ,EAAE,eAAe,EAAE,CAAC;QAElC,MAAM,IAAI,GAAG,MAAM,eAAM,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;QAErD,IAAI,CAAC,IAAI,EAAE;YACT,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,gCAAgC;aAC1C,CAAC;SACH;QAED,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YACvB,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,uBAAuB;aACjC,CAAC;SACH;QAED,IAAI,MAAM,gBAAM,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE;YAChD,IAAA,iBAAO,EAAC,GAAG,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;YAEtB,OAAO,IAAI,CAAC;SACb;aAAM;YACL,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,uBAAuB;aACjC,CAAC;SACH;IACH,CAAC;IACD,UAAU,EAAE,KAAK,EAAE,CAAC,GAAG,IAAI,EAAE,EAAO,EAAE,EAAE,GAAG,EAAE,EAAE,EAAO,EAAE,EAAE;QACxD,qBAAqB;QACrB,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;QAE1C,MAAM,eAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACvB,KAAK,EAAE,EAAE,EAAE,EAAE;YACb,IAAI,EAAE;gBACJ,GAAG;aACJ;SACF,CAAC,CAAC;QAEH,GAAG,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;QAC/B,GAAG,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;QAEhC,OAAO,IAAI,CAAC;IACd,CAAC;CACF,CAAC","sourcesContent":["import argon2 from \"argon2\";\nimport { cookies } from \"../../cookies\";\nimport { prisma } from \"../../prisma\";\n\nexport default {\n  loginUser: async (\n    _ = null,\n    {\n      usernameOrEmail,\n      password,\n    }: { usernameOrEmail: string; password: string },\n    { __, res }: any\n  ) => {\n    //Check if usernameOrEmail is an email or username\n    const where = usernameOrEmail.includes(\"@\")\n      ? { email: usernameOrEmail }\n      : { username: usernameOrEmail };\n\n    const user = await prisma.user.findUnique({ where });\n\n    if (!user) {\n      return {\n        code: 400,\n        message: \"Email or username is incorrect\",\n      };\n    }\n\n    if (!user.emailVerified) {\n      return {\n        code: 400,\n        message: \"Email is not verified\",\n      };\n    }\n\n    if (await argon2.verify(user.password, password)) {\n      cookies(res, user.id);\n\n      return user;\n    } else {\n      return {\n        code: 400,\n        message: \"Password is incorrect\",\n      };\n    }\n  },\n  logoutUser: async (_ = null, __: any, { res, id }: any) => {\n    //seconds since epoch\n    const iat = Math.floor(Date.now() / 1000);\n\n    await prisma.user.update({\n      where: { id },\n      data: {\n        iat,\n      },\n    });\n\n    res.clearCookie(\"accessToken\");\n    res.clearCookie(\"refreshToken\");\n\n    return true;\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"83c12da3ce1ab7f35c90cf3ea288d195a3426029","contentHash":"7fead6df6345522c888d28607a148ddc76923d970f0b6983fbbf6eca305251fb"},"/usr/local/src/appetized-server/src/cookies.ts":{"path":"/usr/local/src/appetized-server/src/cookies.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":25}},"2":{"start":{"line":4,"column":23},"end":{"line":4,"column":46}},"3":{"start":{"line":7,"column":4},"end":{"line":7,"column":35}},"4":{"start":{"line":8,"column":4},"end":{"line":8,"column":36}},"5":{"start":{"line":10,"column":4},"end":{"line":15,"column":7}},"6":{"start":{"line":17,"column":4},"end":{"line":22,"column":7}},"7":{"start":{"line":24,"column":0},"end":{"line":24,"column":26}}},"fnMap":{"0":{"name":"cookies","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":16}},"loc":{"start":{"line":5,"column":26},"end":{"line":23,"column":1}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":18},"end":{"line":13,"column":72}},"type":"cond-expr","locations":[{"start":{"line":13,"column":58},"end":{"line":13,"column":63}},{"start":{"line":13,"column":66},"end":{"line":13,"column":72}}],"line":13},"1":{"loc":{"start":{"line":20,"column":18},"end":{"line":20,"column":72}},"type":"cond-expr","locations":[{"start":{"line":20,"column":58},"end":{"line":20,"column":63}},{"start":{"line":20,"column":66},"end":{"line":20,"column":72}}],"line":20}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1},"f":{"0":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/cookies.ts","sources":["/usr/local/src/appetized-server/src/cookies.ts"],"names":[],"mappings":";;;AAAA,+CAA4C;AAG5C,SAAgB,OAAO,CAAC,GAAQ,EAAE,EAAU;IAC1C,oBAAoB;IACpB,GAAG,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;IAC/B,GAAG,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;IAEhC,4DAA4D;IAC5D,GAAG,CAAC,MAAM,CACR,aAAa,EACb,IAAA,mBAAI,EAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,YAAsB,CAAC,EACpD;QACE,OAAO,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;QAC9C,QAAQ,EAAE,IAAI;QACd,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM;QAChE,MAAM,EAAE,IAAI;KACI,CACnB,CAAC;IACF,sEAAsE;IACtE,GAAG,CAAC,MAAM,CACR,cAAc,EACd,IAAA,mBAAI,EAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,aAAuB,CAAC,EACrD;QACE,OAAO,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;QACxD,QAAQ,EAAE,IAAI;QACd,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM;QAChE,MAAM,EAAE,IAAI;KACI,CACnB,CAAC;AACJ,CAAC;AA3BD,0BA2BC","sourcesContent":["import { Secret, sign } from \"jsonwebtoken\";\nimport { CookieOptions } from \"express\";\n\nexport function cookies(res: any, id: string) {\n  // Clear old cookies\n  res.clearCookie(\"accessToken\");\n  res.clearCookie(\"refreshToken\");\n\n  // Access token expires in an hour, used for authentication.\n  res.cookie(\n    \"accessToken\",\n    sign({ id: id }, process.env.ACCESS_TOKEN as Secret),\n    {\n      expires: new Date(Date.now() + 60 * 60 * 1000),\n      httpOnly: true,\n      sameSite: process.env.NODE_ENV === \"production\" ? \"lax\" : \"none\",\n      secure: true,\n    } as CookieOptions\n  );\n  // Refresh token expires in a week, used to generate new access tokens\n  res.cookie(\n    \"refreshToken\",\n    sign({ id: id }, process.env.REFRESH_TOKEN as Secret),\n    {\n      expires: new Date(Date.now() + 28 * 24 * 60 * 60 * 1000),\n      httpOnly: true,\n      sameSite: process.env.NODE_ENV === \"production\" ? \"lax\" : \"none\",\n      secure: true,\n    } as CookieOptions\n  );\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9e0585d32bba09477fc3d5171edbddd497d74385","contentHash":"b7d397cb43765e2d7967731ea7eeca57a89bc234d62e96ad70fd9343d9b7d1c7"},"/usr/local/src/appetized-server/src/schema/mutations/user.ts":{"path":"/usr/local/src/appetized-server/src/schema/mutations/user.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":51}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":40}},"5":{"start":{"line":8,"column":0},"end":{"line":295,"column":2}},"6":{"start":{"line":11,"column":8},"end":{"line":16,"column":9}},"7":{"start":{"line":12,"column":12},"end":{"line":15,"column":14}},"8":{"start":{"line":17,"column":8},"end":{"line":22,"column":9}},"9":{"start":{"line":18,"column":12},"end":{"line":21,"column":14}},"10":{"start":{"line":23,"column":8},"end":{"line":28,"column":9}},"11":{"start":{"line":24,"column":12},"end":{"line":27,"column":14}},"12":{"start":{"line":29,"column":8},"end":{"line":34,"column":9}},"13":{"start":{"line":30,"column":12},"end":{"line":33,"column":14}},"14":{"start":{"line":36,"column":8},"end":{"line":41,"column":9}},"15":{"start":{"line":37,"column":12},"end":{"line":40,"column":14}},"16":{"start":{"line":42,"column":8},"end":{"line":47,"column":9}},"17":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"18":{"start":{"line":49,"column":8},"end":{"line":54,"column":9}},"19":{"start":{"line":50,"column":12},"end":{"line":53,"column":14}},"20":{"start":{"line":55,"column":8},"end":{"line":60,"column":9}},"21":{"start":{"line":56,"column":12},"end":{"line":59,"column":14}},"22":{"start":{"line":62,"column":8},"end":{"line":67,"column":9}},"23":{"start":{"line":63,"column":12},"end":{"line":66,"column":14}},"24":{"start":{"line":68,"column":8},"end":{"line":73,"column":9}},"25":{"start":{"line":69,"column":12},"end":{"line":72,"column":14}},"26":{"start":{"line":74,"column":8},"end":{"line":79,"column":9}},"27":{"start":{"line":75,"column":12},"end":{"line":78,"column":14}},"28":{"start":{"line":81,"column":27},"end":{"line":92,"column":10}},"29":{"start":{"line":93,"column":8},"end":{"line":113,"column":9}},"30":{"start":{"line":94,"column":12},"end":{"line":100,"column":13}},"31":{"start":{"line":96,"column":16},"end":{"line":99,"column":18}},"32":{"start":{"line":101,"column":12},"end":{"line":106,"column":13}},"33":{"start":{"line":102,"column":16},"end":{"line":105,"column":18}},"34":{"start":{"line":107,"column":12},"end":{"line":112,"column":13}},"35":{"start":{"line":108,"column":16},"end":{"line":111,"column":18}},"36":{"start":{"line":114,"column":8},"end":{"line":114,"column":67}},"37":{"start":{"line":115,"column":8},"end":{"line":119,"column":11}},"38":{"start":{"line":122,"column":8},"end":{"line":128,"column":9}},"39":{"start":{"line":123,"column":12},"end":{"line":127,"column":14}},"40":{"start":{"line":129,"column":8},"end":{"line":166,"column":9}},"41":{"start":{"line":131,"column":12},"end":{"line":136,"column":13}},"42":{"start":{"line":132,"column":16},"end":{"line":135,"column":18}},"43":{"start":{"line":137,"column":12},"end":{"line":142,"column":13}},"44":{"start":{"line":138,"column":16},"end":{"line":141,"column":18}},"45":{"start":{"line":143,"column":12},"end":{"line":148,"column":13}},"46":{"start":{"line":144,"column":16},"end":{"line":147,"column":18}},"47":{"start":{"line":149,"column":12},"end":{"line":154,"column":13}},"48":{"start":{"line":150,"column":16},"end":{"line":153,"column":18}},"49":{"start":{"line":156,"column":12},"end":{"line":165,"column":13}},"50":{"start":{"line":161,"column":16},"end":{"line":164,"column":18}},"51":{"start":{"line":167,"column":8},"end":{"line":175,"column":11}},"52":{"start":{"line":178,"column":8},"end":{"line":183,"column":9}},"53":{"start":{"line":179,"column":12},"end":{"line":182,"column":14}},"54":{"start":{"line":185,"column":23},"end":{"line":211,"column":10}},"55":{"start":{"line":213,"column":28},"end":{"line":221,"column":10}},"56":{"start":{"line":223,"column":22},"end":{"line":231,"column":10}},"57":{"start":{"line":233,"column":24},"end":{"line":239,"column":10}},"58":{"start":{"line":240,"column":8},"end":{"line":240,"column":61}},"59":{"start":{"line":241,"column":8},"end":{"line":241,"column":20}},"60":{"start":{"line":244,"column":8},"end":{"line":249,"column":9}},"61":{"start":{"line":245,"column":12},"end":{"line":248,"column":14}},"62":{"start":{"line":250,"column":8},"end":{"line":255,"column":9}},"63":{"start":{"line":251,"column":12},"end":{"line":254,"column":14}},"64":{"start":{"line":256,"column":8},"end":{"line":267,"column":11}},"65":{"start":{"line":270,"column":8},"end":{"line":275,"column":9}},"66":{"start":{"line":271,"column":12},"end":{"line":274,"column":14}},"67":{"start":{"line":276,"column":8},"end":{"line":281,"column":9}},"68":{"start":{"line":277,"column":12},"end":{"line":280,"column":14}},"69":{"start":{"line":282,"column":8},"end":{"line":293,"column":11}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":16},"end":{"line":9,"column":17}},"loc":{"start":{"line":9,"column":47},"end":{"line":120,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":121,"column":14},"end":{"line":121,"column":15}},"loc":{"start":{"line":121,"column":73},"end":{"line":176,"column":5}},"line":121},"3":{"name":"(anonymous_3)","decl":{"start":{"line":177,"column":16},"end":{"line":177,"column":17}},"loc":{"start":{"line":177,"column":55},"end":{"line":242,"column":5}},"line":177},"4":{"name":"(anonymous_4)","decl":{"start":{"line":243,"column":16},"end":{"line":243,"column":17}},"loc":{"start":{"line":243,"column":50},"end":{"line":268,"column":5}},"line":243},"5":{"name":"(anonymous_5)","decl":{"start":{"line":269,"column":18},"end":{"line":269,"column":19}},"loc":{"start":{"line":269,"column":52},"end":{"line":294,"column":5}},"line":269}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":9,"column":23},"end":{"line":9,"column":31}},"type":"default-arg","locations":[{"start":{"line":9,"column":27},"end":{"line":9,"column":31}}],"line":9},"4":{"loc":{"start":{"line":11,"column":8},"end":{"line":16,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":16,"column":9}},{"start":{"line":11,"column":8},"end":{"line":16,"column":9}}],"line":11},"5":{"loc":{"start":{"line":17,"column":8},"end":{"line":22,"column":9}},"type":"if","locations":[{"start":{"line":17,"column":8},"end":{"line":22,"column":9}},{"start":{"line":17,"column":8},"end":{"line":22,"column":9}}],"line":17},"6":{"loc":{"start":{"line":23,"column":8},"end":{"line":28,"column":9}},"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":28,"column":9}},{"start":{"line":23,"column":8},"end":{"line":28,"column":9}}],"line":23},"7":{"loc":{"start":{"line":29,"column":8},"end":{"line":34,"column":9}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":34,"column":9}},{"start":{"line":29,"column":8},"end":{"line":34,"column":9}}],"line":29},"8":{"loc":{"start":{"line":36,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":41,"column":9}},{"start":{"line":36,"column":8},"end":{"line":41,"column":9}}],"line":36},"9":{"loc":{"start":{"line":42,"column":8},"end":{"line":47,"column":9}},"type":"if","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":9}},{"start":{"line":42,"column":8},"end":{"line":47,"column":9}}],"line":42},"10":{"loc":{"start":{"line":49,"column":8},"end":{"line":54,"column":9}},"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":54,"column":9}},{"start":{"line":49,"column":8},"end":{"line":54,"column":9}}],"line":49},"11":{"loc":{"start":{"line":55,"column":8},"end":{"line":60,"column":9}},"type":"if","locations":[{"start":{"line":55,"column":8},"end":{"line":60,"column":9}},{"start":{"line":55,"column":8},"end":{"line":60,"column":9}}],"line":55},"12":{"loc":{"start":{"line":62,"column":8},"end":{"line":67,"column":9}},"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":67,"column":9}},{"start":{"line":62,"column":8},"end":{"line":67,"column":9}}],"line":62},"13":{"loc":{"start":{"line":68,"column":8},"end":{"line":73,"column":9}},"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":73,"column":9}},{"start":{"line":68,"column":8},"end":{"line":73,"column":9}}],"line":68},"14":{"loc":{"start":{"line":74,"column":8},"end":{"line":79,"column":9}},"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":79,"column":9}},{"start":{"line":74,"column":8},"end":{"line":79,"column":9}}],"line":74},"15":{"loc":{"start":{"line":93,"column":8},"end":{"line":113,"column":9}},"type":"if","locations":[{"start":{"line":93,"column":8},"end":{"line":113,"column":9}},{"start":{"line":93,"column":8},"end":{"line":113,"column":9}}],"line":93},"16":{"loc":{"start":{"line":94,"column":12},"end":{"line":100,"column":13}},"type":"if","locations":[{"start":{"line":94,"column":12},"end":{"line":100,"column":13}},{"start":{"line":94,"column":12},"end":{"line":100,"column":13}}],"line":94},"17":{"loc":{"start":{"line":94,"column":16},"end":{"line":95,"column":47}},"type":"binary-expr","locations":[{"start":{"line":94,"column":16},"end":{"line":94,"column":53}},{"start":{"line":95,"column":16},"end":{"line":95,"column":47}}],"line":94},"18":{"loc":{"start":{"line":101,"column":12},"end":{"line":106,"column":13}},"type":"if","locations":[{"start":{"line":101,"column":12},"end":{"line":106,"column":13}},{"start":{"line":101,"column":12},"end":{"line":106,"column":13}}],"line":101},"19":{"loc":{"start":{"line":107,"column":12},"end":{"line":112,"column":13}},"type":"if","locations":[{"start":{"line":107,"column":12},"end":{"line":112,"column":13}},{"start":{"line":107,"column":12},"end":{"line":112,"column":13}}],"line":107},"20":{"loc":{"start":{"line":121,"column":21},"end":{"line":121,"column":29}},"type":"default-arg","locations":[{"start":{"line":121,"column":25},"end":{"line":121,"column":29}}],"line":121},"21":{"loc":{"start":{"line":122,"column":8},"end":{"line":128,"column":9}},"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":128,"column":9}},{"start":{"line":122,"column":8},"end":{"line":128,"column":9}}],"line":122},"22":{"loc":{"start":{"line":129,"column":8},"end":{"line":166,"column":9}},"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":166,"column":9}},{"start":{"line":129,"column":8},"end":{"line":166,"column":9}}],"line":129},"23":{"loc":{"start":{"line":131,"column":12},"end":{"line":136,"column":13}},"type":"if","locations":[{"start":{"line":131,"column":12},"end":{"line":136,"column":13}},{"start":{"line":131,"column":12},"end":{"line":136,"column":13}}],"line":131},"24":{"loc":{"start":{"line":137,"column":12},"end":{"line":142,"column":13}},"type":"if","locations":[{"start":{"line":137,"column":12},"end":{"line":142,"column":13}},{"start":{"line":137,"column":12},"end":{"line":142,"column":13}}],"line":137},"25":{"loc":{"start":{"line":143,"column":12},"end":{"line":148,"column":13}},"type":"if","locations":[{"start":{"line":143,"column":12},"end":{"line":148,"column":13}},{"start":{"line":143,"column":12},"end":{"line":148,"column":13}}],"line":143},"26":{"loc":{"start":{"line":149,"column":12},"end":{"line":154,"column":13}},"type":"if","locations":[{"start":{"line":149,"column":12},"end":{"line":154,"column":13}},{"start":{"line":149,"column":12},"end":{"line":154,"column":13}}],"line":149},"27":{"loc":{"start":{"line":156,"column":12},"end":{"line":165,"column":13}},"type":"if","locations":[{"start":{"line":156,"column":12},"end":{"line":165,"column":13}},{"start":{"line":156,"column":12},"end":{"line":165,"column":13}}],"line":156},"28":{"loc":{"start":{"line":177,"column":23},"end":{"line":177,"column":31}},"type":"default-arg","locations":[{"start":{"line":177,"column":27},"end":{"line":177,"column":31}}],"line":177},"29":{"loc":{"start":{"line":177,"column":33},"end":{"line":177,"column":42}},"type":"default-arg","locations":[{"start":{"line":177,"column":38},"end":{"line":177,"column":42}}],"line":177},"30":{"loc":{"start":{"line":178,"column":8},"end":{"line":183,"column":9}},"type":"if","locations":[{"start":{"line":178,"column":8},"end":{"line":183,"column":9}},{"start":{"line":178,"column":8},"end":{"line":183,"column":9}}],"line":178},"31":{"loc":{"start":{"line":243,"column":23},"end":{"line":243,"column":31}},"type":"default-arg","locations":[{"start":{"line":243,"column":27},"end":{"line":243,"column":31}}],"line":243},"32":{"loc":{"start":{"line":244,"column":8},"end":{"line":249,"column":9}},"type":"if","locations":[{"start":{"line":244,"column":8},"end":{"line":249,"column":9}},{"start":{"line":244,"column":8},"end":{"line":249,"column":9}}],"line":244},"33":{"loc":{"start":{"line":250,"column":8},"end":{"line":255,"column":9}},"type":"if","locations":[{"start":{"line":250,"column":8},"end":{"line":255,"column":9}},{"start":{"line":250,"column":8},"end":{"line":255,"column":9}}],"line":250},"34":{"loc":{"start":{"line":269,"column":25},"end":{"line":269,"column":33}},"type":"default-arg","locations":[{"start":{"line":269,"column":29},"end":{"line":269,"column":33}}],"line":269},"35":{"loc":{"start":{"line":270,"column":8},"end":{"line":275,"column":9}},"type":"if","locations":[{"start":{"line":270,"column":8},"end":{"line":275,"column":9}},{"start":{"line":270,"column":8},"end":{"line":275,"column":9}}],"line":270},"36":{"loc":{"start":{"line":276,"column":8},"end":{"line":281,"column":9}},"type":"if","locations":[{"start":{"line":276,"column":8},"end":{"line":281,"column":9}},{"start":{"line":276,"column":8},"end":{"line":281,"column":9}}],"line":276}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":5,"7":0,"8":5,"9":0,"10":5,"11":1,"12":4,"13":0,"14":4,"15":0,"16":4,"17":0,"18":4,"19":0,"20":4,"21":0,"22":4,"23":0,"24":4,"25":0,"26":4,"27":0,"28":4,"29":4,"30":2,"31":0,"32":2,"33":1,"34":1,"35":1,"36":2,"37":2,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0},"f":{"0":1,"1":5,"2":0,"3":0,"4":0,"5":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0],"4":[0,5],"5":[0,5],"6":[1,4],"7":[0,4],"8":[0,4],"9":[0,4],"10":[0,4],"11":[0,4],"12":[0,4],"13":[0,4],"14":[0,4],"15":[2,2],"16":[0,2],"17":[2,1],"18":[1,1],"19":[1,0],"20":[0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0],"29":[0],"30":[0,0],"31":[0],"32":[0,0],"33":[0,0],"34":[0],"35":[0,0],"36":[0,0]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/mutations/user.ts","sources":["/usr/local/src/appetized-server/src/schema/mutations/user.ts"],"names":[],"mappings":";;;;;AACA,oDAA4B;AAC5B,yCAAsC;AAEtC,kBAAe;IACb,UAAU,EAAE,KAAK,EACf,CAAC,GAAG,IAAI,EACR,EACE,IAAI,GAQL,EACD,EAAE;QACF,yBAAyB;QACzB,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YAC5B,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,6CAA6C;aACvD,CAAC;SACH;QAED,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,EAAE,EAAE;YAC7B,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,+CAA+C;aACzD,CAAC;SACH;QAED,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,IAAI,EAAE;YAC7C,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,yDAAyD;aACnE,CAAC;SACH;QAED,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,qBAAqB,CAAC,KAAK,IAAI,EAAE;YACvD,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,qDAAqD;aAC/D,CAAC;SACH;QAED,sBAAsB;QACtB,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;YAClC,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,kBAAkB;aAC5B,CAAC;SACH;QAED,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,EAAE;YAC3B,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,6CAA6C;aACvD,CAAC;SACH;QAED,yBAAyB;QACzB,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YAC5B,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,6CAA6C;aACvD,CAAC;SACH;QAED,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,GAAG,EAAE;YAC9B,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,gDAAgD;aAC1D,CAAC;SACH;QAED,wCAAwC;QACxC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,sBAAsB;aAChC,CAAC;SACH;QAED,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACf,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,mBAAmB;aAC7B,CAAC;SACH;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,sBAAsB;aAChC,CAAC;SACH;QAED,+BAA+B;QAC/B,MAAM,UAAU,GAAG,MAAM,eAAM,CAAC,IAAI,CAAC,SAAS,CAAC;YAC7C,KAAK,EAAE;gBACL,EAAE,EAAE;oBACF;wBACE,QAAQ,EAAE,IAAI,CAAC,QAAQ;qBACxB;oBACD;wBACE,KAAK,EAAE,IAAI,CAAC,KAAK;qBAClB;iBACF;aACF;SACF,CAAC,CAAC;QAEH,IAAI,UAAU,EAAE;YACd,IACE,UAAU,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ;gBACrC,UAAU,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,EAC/B;gBACA,OAAO;oBACL,IAAI,EAAE,GAAG;oBACT,OAAO,EAAE,mCAAmC;iBAC7C,CAAC;aACH;YACD,IAAI,UAAU,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,EAAE;gBACnC,OAAO;oBACL,IAAI,EAAE,GAAG;oBACT,OAAO,EAAE,sBAAsB;iBAChC,CAAC;aACH;YACD,IAAI,UAAU,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,EAAE;gBACzC,OAAO;oBACL,IAAI,EAAE,GAAG;oBACT,OAAO,EAAE,yBAAyB;iBACnC,CAAC;aACH;SACF;QAED,IAAI,CAAC,QAAQ,GAAG,MAAM,gBAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEjD,OAAO,MAAM,eAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YAC9B,IAAI,kCACC,IAAI;gBACP,8BAA8B;gBAC9B,aAAa,EAAE,IAAI,GACpB;SACF,CAAC,CAAC;IACL,CAAC;IACD,QAAQ,EAAE,KAAK,EACb,CAAC,GAAG,IAAI,EACR,EACE,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,GAMzB,EACD,EAAE,EAAE,EAAkB,EACtB,EAAE;QACF,IAAI,CAAC,EAAE,EAAE;YACP,OAAO;gBACL,gBAAgB;gBAChB,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,eAAe;aACzB,CAAC;SACH;QAED,IAAI,QAAQ,EAAE;YACZ,yBAAyB;YACzB,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;gBACvB,OAAO;oBACL,IAAI,EAAE,GAAG;oBACT,OAAO,EAAE,6CAA6C;iBACvD,CAAC;aACH;YAED,IAAI,QAAQ,CAAC,MAAM,GAAG,EAAE,EAAE;gBACxB,OAAO;oBACL,IAAI,EAAE,GAAG;oBACT,OAAO,EAAE,+CAA+C;iBACzD,CAAC;aACH;YAED,IAAI,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,IAAI,EAAE;gBACxC,OAAO;oBACL,IAAI,EAAE,GAAG;oBACT,OAAO,EAAE,yDAAyD;iBACnE,CAAC;aACH;YAED,IAAI,QAAQ,CAAC,KAAK,CAAC,qBAAqB,CAAC,KAAK,IAAI,EAAE;gBAClD,OAAO;oBACL,IAAI,EAAE,GAAG;oBACT,OAAO,EAAE,qDAAqD;iBAC/D,CAAC;aACH;YAED,6BAA6B;YAC7B,IACE,MAAM,eAAM,CAAC,IAAI,CAAC,SAAS,CAAC;gBAC1B,KAAK,EAAE;oBACL,QAAQ;iBACT;aACF,CAAC,EACF;gBACA,OAAO;oBACL,IAAI,EAAE,GAAG;oBACT,OAAO,EAAE,mBAAmB;iBAC7B,CAAC;aACH;SACF;QAED,OAAO,eAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACxB,KAAK,EAAE;gBACL,EAAE;aACH;YACD,IAAI,EAAE;gBACJ,IAAI,EAAE,IAAI;gBACV,QAAQ,EAAE,QAAQ;aACnB;SACF,CAAC,CAAC;IACL,CAAC;IACD,UAAU,EAAE,KAAK,EAAE,CAAC,GAAG,IAAI,EAAE,EAAE,GAAG,IAAI,EAAE,EAAE,EAAE,EAAkB,EAAE,EAAE;QAChE,IAAI,CAAC,EAAE,EAAE;YACP,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,eAAe;aACzB,CAAC;SACH;QAED,uBAAuB;QACvB,MAAM,MAAM,GAAG,MAAM,eAAM,CAAC,KAAK,CAAC,UAAU,CAAC;YAC3C,KAAK,EAAE;gBACL,EAAE,EAAE;oBACF;wBACE,OAAO,EAAE;4BACP,EAAE;yBACH;qBACF;oBACD;wBACE,MAAM,EAAE;4BACN,MAAM,EAAE;gCACN,EAAE;6BACH;yBACF;qBACF;oBACD;wBACE,IAAI,EAAE;4BACJ,MAAM,EAAE;gCACN,MAAM,EAAE;oCACN,EAAE;iCACH;6BACF;yBACF;qBACF;iBACF;aACF;SACF,CAAC,CAAC;QAEH,4BAA4B;QAC5B,MAAM,WAAW,GAAG,MAAM,eAAM,CAAC,UAAU,CAAC,UAAU,CAAC;YACrD,KAAK,EAAE;gBACL,MAAM,EAAE;oBACN,MAAM,EAAE;wBACN,EAAE;qBACH;iBACF;aACF;SACF,CAAC,CAAC;QAEH,sBAAsB;QACtB,MAAM,KAAK,GAAG,MAAM,eAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACzC,KAAK,EAAE;gBACL,MAAM,EAAE;oBACN,MAAM,EAAE;wBACN,EAAE;qBACH;iBACF;aACF;SACF,CAAC,CAAC;QAEH,wBAAwB;QACxB,MAAM,OAAO,GAAG,MAAM,eAAM,CAAC,MAAM,CAAC,UAAU,CAAC;YAC7C,KAAK,EAAE;gBACL,MAAM,EAAE;oBACN,EAAE;iBACH;aACF;SACF,CAAC,CAAC;QAEH,MAAM,eAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QAE5C,OAAO,IAAI,CAAC;IACd,CAAC;IACD,UAAU,EAAE,KAAK,EACf,CAAC,GAAG,IAAI,EACR,IAAoB,EACpB,EAAE,EAAE,EAAkB,EACtB,EAAE;QACF,IAAI,CAAC,EAAE,EAAE;YACP,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,eAAe;aACzB,CAAC;SACH;QACD,IAAI,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE;YAClB,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,4BAA4B;aACtC,CAAC;SACH;QACD,OAAO,MAAM,eAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YAC9B,KAAK,EAAE;gBACL,EAAE;aACH;YACD,IAAI,EAAE;gBACJ,SAAS,EAAE;oBACT,OAAO,EAAE;wBACP,EAAE,EAAE,IAAI,CAAC,EAAE;qBACZ;iBACF;aACF;SACF,CAAC,CAAC;IACL,CAAC;IACD,YAAY,EAAE,KAAK,EACjB,CAAC,GAAG,IAAI,EACR,IAAoB,EACpB,EAAE,EAAE,EAAkB,EACtB,EAAE;QACF,IAAI,CAAC,EAAE,EAAE;YACP,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,eAAe;aACzB,CAAC;SACH;QACD,IAAI,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE;YAClB,OAAO;gBACL,IAAI,EAAE,GAAG;gBACT,OAAO,EAAE,8BAA8B;aACxC,CAAC;SACH;QACD,OAAO,MAAM,eAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YAC9B,KAAK,EAAE;gBACL,EAAE;aACH;YACD,IAAI,EAAE;gBACJ,SAAS,EAAE;oBACT,UAAU,EAAE;wBACV,EAAE,EAAE,IAAI,CAAC,EAAE;qBACZ;iBACF;aACF;SACF,CAAC,CAAC;IACL,CAAC;CACF,CAAC","sourcesContent":["import { s3 } from \"../../app\";\nimport argon2 from \"argon2\";\nimport { prisma } from \"../../prisma\";\n\nexport default {\n  createUser: async (\n    _ = null,\n    {\n      user,\n    }: {\n      user: {\n        name?: string;\n        username: string;\n        email: string;\n        password: string;\n      };\n    }\n  ) => {\n    //Check username is valid\n    if (user.username.length < 3) {\n      return {\n        code: 400,\n        message: \"Username must be at least 3 characters long\",\n      };\n    }\n\n    if (user.username.length > 20) {\n      return {\n        code: 400,\n        message: \"Username must be less than 20 characters long\",\n      };\n    }\n\n    if (user.username.match(/^[a-z-]+$/) === null) {\n      return {\n        code: 400,\n        message: \"Username must only contain lowercase letters and dashes\",\n      };\n    }\n\n    if (user.username.match(/^[a-z][a-z-]+[a-z]$/) === null) {\n      return {\n        code: 400,\n        message: \"Username must start and end with a lowercase letter\",\n      };\n    }\n\n    //Check email is valid\n    if (user.email.indexOf(\"@\") === -1) {\n      return {\n        code: 400,\n        message: \"Email is invalid\",\n      };\n    }\n\n    if (user.email.length > 100) {\n      return {\n        code: 400,\n        message: \"Email must be less than 100 characters long\",\n      };\n    }\n\n    //Check password is valid\n    if (user.password.length < 8) {\n      return {\n        code: 400,\n        message: \"Password must be at least 8 characters long\",\n      };\n    }\n\n    if (user.password.length > 100) {\n      return {\n        code: 400,\n        message: \"Password must be less than 100 characters long\",\n      };\n    }\n\n    // Check all required fields are present\n    if (!user.username) {\n      return {\n        code: 400,\n        message: \"Username is required\",\n      };\n    }\n\n    if (!user.email) {\n      return {\n        code: 400,\n        message: \"Email is required\",\n      };\n    }\n\n    if (!user.password) {\n      return {\n        code: 400,\n        message: \"Password is required\",\n      };\n    }\n\n    // Check if user already exists\n    const userExists = await prisma.user.findFirst({\n      where: {\n        OR: [\n          {\n            username: user.username,\n          },\n          {\n            email: user.email,\n          },\n        ],\n      },\n    });\n\n    if (userExists) {\n      if (\n        userExists.username === user.username &&\n        userExists.email === user.email\n      ) {\n        return {\n          code: 400,\n          message: \"Username and email already exists\",\n        };\n      }\n      if (userExists.email === user.email) {\n        return {\n          code: 400,\n          message: \"Email already exists\",\n        };\n      }\n      if (userExists.username === user.username) {\n        return {\n          code: 400,\n          message: \"Username already exists\",\n        };\n      }\n    }\n\n    user.password = await argon2.hash(user.password);\n\n    return await prisma.user.create({\n      data: {\n        ...user,\n        // TODO add email verification\n        emailVerified: true,\n      },\n    });\n  },\n  editUser: async (\n    _ = null,\n    {\n      user: { name, username },\n    }: {\n      user: {\n        name: string;\n        username: string;\n      };\n    },\n    { id }: { id: string }\n  ) => {\n    if (!id) {\n      return {\n        // Not logged in\n        code: 401,\n        message: \"Not logged in\",\n      };\n    }\n\n    if (username) {\n      //Check username is valid\n      if (username.length < 3) {\n        return {\n          code: 400,\n          message: \"Username must be at least 3 characters long\",\n        };\n      }\n\n      if (username.length > 20) {\n        return {\n          code: 400,\n          message: \"Username must be less than 20 characters long\",\n        };\n      }\n\n      if (username.match(/^[a-z-]+$/) === null) {\n        return {\n          code: 400,\n          message: \"Username must only contain lowercase letters and dashes\",\n        };\n      }\n\n      if (username.match(/^[a-z][a-z-]+[a-z]$/) === null) {\n        return {\n          code: 400,\n          message: \"Username must start and end with a lowercase letter\",\n        };\n      }\n\n      // Check if username is taken\n      if (\n        await prisma.user.findFirst({\n          where: {\n            username,\n          },\n        })\n      ) {\n        return {\n          code: 400,\n          message: \"Username is taken\",\n        };\n      }\n    }\n\n    return prisma.user.update({\n      where: {\n        id,\n      },\n      data: {\n        name: name,\n        username: username,\n      },\n    });\n  },\n  deleteUser: async (_ = null, __ = null, { id }: { id: string }) => {\n    if (!id) {\n      return {\n        code: 401,\n        message: \"Not logged in\",\n      };\n    }\n\n    // Delete user's images\n    const images = await prisma.image.deleteMany({\n      where: {\n        OR: [\n          {\n            profile: {\n              id,\n            },\n          },\n          {\n            recipe: {\n              author: {\n                id,\n              },\n            },\n          },\n          {\n            step: {\n              recipe: {\n                author: {\n                  id,\n                },\n              },\n            },\n          },\n        ],\n      },\n    });\n\n    // Delete user's ingredients\n    const ingredients = await prisma.ingredient.deleteMany({\n      where: {\n        recipe: {\n          author: {\n            id,\n          },\n        },\n      },\n    });\n\n    // Delete user's steps\n    const steps = await prisma.step.deleteMany({\n      where: {\n        recipe: {\n          author: {\n            id,\n          },\n        },\n      },\n    });\n\n    // Delete user's recipes\n    const recipes = await prisma.recipe.deleteMany({\n      where: {\n        author: {\n          id,\n        },\n      },\n    });\n\n    await prisma.user.delete({ where: { id } });\n\n    return true;\n  },\n  followUser: async (\n    _ = null,\n    args: { id: string },\n    { id }: { id: string }\n  ) => {\n    if (!id) {\n      return {\n        code: 401,\n        message: \"Not logged in\",\n      };\n    }\n    if (args.id === id) {\n      return {\n        code: 400,\n        message: \"You cannot follow yourself\",\n      };\n    }\n    return await prisma.user.update({\n      where: {\n        id,\n      },\n      data: {\n        following: {\n          connect: {\n            id: args.id,\n          },\n        },\n      },\n    });\n  },\n  unfollowUser: async (\n    _ = null,\n    args: { id: string },\n    { id }: { id: string }\n  ) => {\n    if (!id) {\n      return {\n        code: 401,\n        message: \"Not logged in\",\n      };\n    }\n    if (args.id === id) {\n      return {\n        code: 400,\n        message: \"You cannot unfollow yourself\",\n      };\n    }\n    return await prisma.user.update({\n      where: {\n        id,\n      },\n      data: {\n        following: {\n          disconnect: {\n            id: args.id,\n          },\n        },\n      },\n    });\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f29d5dda86590b5b41b52d620f700be882e7319a","contentHash":"82475414d1b56102e8b0589bdb3200304c5bf28e5fb3a0dc5964e4bae374a151"},"/usr/local/src/appetized-server/src/schema/mutations/recipe.ts":{"path":"/usr/local/src/appetized-server/src/schema/mutations/recipe.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":0},"end":{"line":163,"column":2}},"3":{"start":{"line":7,"column":8},"end":{"line":12,"column":9}},"4":{"start":{"line":8,"column":12},"end":{"line":11,"column":14}},"5":{"start":{"line":14,"column":8},"end":{"line":20,"column":11}},"6":{"start":{"line":24,"column":8},"end":{"line":29,"column":9}},"7":{"start":{"line":25,"column":12},"end":{"line":28,"column":14}},"8":{"start":{"line":31,"column":29},"end":{"line":35,"column":10}},"9":{"start":{"line":36,"column":8},"end":{"line":41,"column":9}},"10":{"start":{"line":37,"column":12},"end":{"line":40,"column":14}},"11":{"start":{"line":42,"column":8},"end":{"line":47,"column":9}},"12":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"13":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"14":{"start":{"line":49,"column":12},"end":{"line":49,"column":22}},"15":{"start":{"line":52,"column":8},"end":{"line":57,"column":11}},"16":{"start":{"line":61,"column":8},"end":{"line":66,"column":9}},"17":{"start":{"line":62,"column":12},"end":{"line":65,"column":14}},"18":{"start":{"line":68,"column":29},"end":{"line":75,"column":10}},"19":{"start":{"line":76,"column":8},"end":{"line":81,"column":9}},"20":{"start":{"line":77,"column":12},"end":{"line":80,"column":14}},"21":{"start":{"line":82,"column":8},"end":{"line":87,"column":9}},"22":{"start":{"line":83,"column":12},"end":{"line":86,"column":14}},"23":{"start":{"line":89,"column":8},"end":{"line":93,"column":11}},"24":{"start":{"line":97,"column":8},"end":{"line":102,"column":9}},"25":{"start":{"line":98,"column":12},"end":{"line":101,"column":14}},"26":{"start":{"line":104,"column":29},"end":{"line":108,"column":10}},"27":{"start":{"line":109,"column":8},"end":{"line":114,"column":9}},"28":{"start":{"line":110,"column":12},"end":{"line":113,"column":14}},"29":{"start":{"line":115,"column":8},"end":{"line":126,"column":11}},"30":{"start":{"line":127,"column":8},"end":{"line":127,"column":28}},"31":{"start":{"line":131,"column":8},"end":{"line":136,"column":9}},"32":{"start":{"line":132,"column":12},"end":{"line":135,"column":14}},"33":{"start":{"line":138,"column":29},"end":{"line":142,"column":10}},"34":{"start":{"line":143,"column":8},"end":{"line":148,"column":9}},"35":{"start":{"line":144,"column":12},"end":{"line":147,"column":14}},"36":{"start":{"line":149,"column":8},"end":{"line":160,"column":11}},"37":{"start":{"line":161,"column":8},"end":{"line":161,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":18},"end":{"line":5,"column":19}},"loc":{"start":{"line":5,"column":57},"end":{"line":21,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":22,"column":16},"end":{"line":22,"column":17}},"loc":{"start":{"line":22,"column":59},"end":{"line":58,"column":5}},"line":22},"2":{"name":"(anonymous_2)","decl":{"start":{"line":59,"column":18},"end":{"line":59,"column":19}},"loc":{"start":{"line":59,"column":52},"end":{"line":94,"column":5}},"line":59},"3":{"name":"(anonymous_3)","decl":{"start":{"line":95,"column":16},"end":{"line":95,"column":17}},"loc":{"start":{"line":95,"column":50},"end":{"line":128,"column":5}},"line":95},"4":{"name":"(anonymous_4)","decl":{"start":{"line":129,"column":18},"end":{"line":129,"column":19}},"loc":{"start":{"line":129,"column":52},"end":{"line":162,"column":5}},"line":129}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":25},"end":{"line":5,"column":33}},"type":"default-arg","locations":[{"start":{"line":5,"column":29},"end":{"line":5,"column":33}}],"line":5},"1":{"loc":{"start":{"line":7,"column":8},"end":{"line":12,"column":9}},"type":"if","locations":[{"start":{"line":7,"column":8},"end":{"line":12,"column":9}},{"start":{"line":7,"column":8},"end":{"line":12,"column":9}}],"line":7},"2":{"loc":{"start":{"line":22,"column":23},"end":{"line":22,"column":31}},"type":"default-arg","locations":[{"start":{"line":22,"column":27},"end":{"line":22,"column":31}}],"line":22},"3":{"loc":{"start":{"line":24,"column":8},"end":{"line":29,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":29,"column":9}},{"start":{"line":24,"column":8},"end":{"line":29,"column":9}}],"line":24},"4":{"loc":{"start":{"line":36,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":41,"column":9}},{"start":{"line":36,"column":8},"end":{"line":41,"column":9}}],"line":36},"5":{"loc":{"start":{"line":42,"column":8},"end":{"line":47,"column":9}},"type":"if","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":9}},{"start":{"line":42,"column":8},"end":{"line":47,"column":9}}],"line":42},"6":{"loc":{"start":{"line":42,"column":13},"end":{"line":42,"column":94}},"type":"cond-expr","locations":[{"start":{"line":42,"column":64},"end":{"line":42,"column":70}},{"start":{"line":42,"column":73},"end":{"line":42,"column":94}}],"line":42},"7":{"loc":{"start":{"line":42,"column":13},"end":{"line":42,"column":61}},"type":"binary-expr","locations":[{"start":{"line":42,"column":13},"end":{"line":42,"column":34}},{"start":{"line":42,"column":38},"end":{"line":42,"column":61}}],"line":42},"8":{"loc":{"start":{"line":42,"column":101},"end":{"line":42,"column":152}},"type":"cond-expr","locations":[{"start":{"line":42,"column":136},"end":{"line":42,"column":142}},{"start":{"line":42,"column":145},"end":{"line":42,"column":152}}],"line":42},"9":{"loc":{"start":{"line":42,"column":101},"end":{"line":42,"column":133}},"type":"binary-expr","locations":[{"start":{"line":42,"column":101},"end":{"line":42,"column":114}},{"start":{"line":42,"column":118},"end":{"line":42,"column":133}}],"line":42},"10":{"loc":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},{"start":{"line":48,"column":8},"end":{"line":50,"column":9}}],"line":48},"11":{"loc":{"start":{"line":48,"column":13},"end":{"line":48,"column":94}},"type":"cond-expr","locations":[{"start":{"line":48,"column":64},"end":{"line":48,"column":70}},{"start":{"line":48,"column":73},"end":{"line":48,"column":94}}],"line":48},"12":{"loc":{"start":{"line":48,"column":13},"end":{"line":48,"column":61}},"type":"binary-expr","locations":[{"start":{"line":48,"column":13},"end":{"line":48,"column":34}},{"start":{"line":48,"column":38},"end":{"line":48,"column":61}}],"line":48},"13":{"loc":{"start":{"line":48,"column":101},"end":{"line":48,"column":152}},"type":"cond-expr","locations":[{"start":{"line":48,"column":136},"end":{"line":48,"column":142}},{"start":{"line":48,"column":145},"end":{"line":48,"column":152}}],"line":48},"14":{"loc":{"start":{"line":48,"column":101},"end":{"line":48,"column":133}},"type":"binary-expr","locations":[{"start":{"line":48,"column":101},"end":{"line":48,"column":114}},{"start":{"line":48,"column":118},"end":{"line":48,"column":133}}],"line":48},"15":{"loc":{"start":{"line":59,"column":25},"end":{"line":59,"column":33}},"type":"default-arg","locations":[{"start":{"line":59,"column":29},"end":{"line":59,"column":33}}],"line":59},"16":{"loc":{"start":{"line":61,"column":8},"end":{"line":66,"column":9}},"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":66,"column":9}},{"start":{"line":61,"column":8},"end":{"line":66,"column":9}}],"line":61},"17":{"loc":{"start":{"line":76,"column":8},"end":{"line":81,"column":9}},"type":"if","locations":[{"start":{"line":76,"column":8},"end":{"line":81,"column":9}},{"start":{"line":76,"column":8},"end":{"line":81,"column":9}}],"line":76},"18":{"loc":{"start":{"line":82,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":82,"column":8},"end":{"line":87,"column":9}},{"start":{"line":82,"column":8},"end":{"line":87,"column":9}}],"line":82},"19":{"loc":{"start":{"line":82,"column":13},"end":{"line":82,"column":94}},"type":"cond-expr","locations":[{"start":{"line":82,"column":64},"end":{"line":82,"column":70}},{"start":{"line":82,"column":73},"end":{"line":82,"column":94}}],"line":82},"20":{"loc":{"start":{"line":82,"column":13},"end":{"line":82,"column":61}},"type":"binary-expr","locations":[{"start":{"line":82,"column":13},"end":{"line":82,"column":34}},{"start":{"line":82,"column":38},"end":{"line":82,"column":61}}],"line":82},"21":{"loc":{"start":{"line":82,"column":101},"end":{"line":82,"column":152}},"type":"cond-expr","locations":[{"start":{"line":82,"column":136},"end":{"line":82,"column":142}},{"start":{"line":82,"column":145},"end":{"line":82,"column":152}}],"line":82},"22":{"loc":{"start":{"line":82,"column":101},"end":{"line":82,"column":133}},"type":"binary-expr","locations":[{"start":{"line":82,"column":101},"end":{"line":82,"column":114}},{"start":{"line":82,"column":118},"end":{"line":82,"column":133}}],"line":82},"23":{"loc":{"start":{"line":95,"column":23},"end":{"line":95,"column":31}},"type":"default-arg","locations":[{"start":{"line":95,"column":27},"end":{"line":95,"column":31}}],"line":95},"24":{"loc":{"start":{"line":97,"column":8},"end":{"line":102,"column":9}},"type":"if","locations":[{"start":{"line":97,"column":8},"end":{"line":102,"column":9}},{"start":{"line":97,"column":8},"end":{"line":102,"column":9}}],"line":97},"25":{"loc":{"start":{"line":109,"column":8},"end":{"line":114,"column":9}},"type":"if","locations":[{"start":{"line":109,"column":8},"end":{"line":114,"column":9}},{"start":{"line":109,"column":8},"end":{"line":114,"column":9}}],"line":109},"26":{"loc":{"start":{"line":129,"column":25},"end":{"line":129,"column":33}},"type":"default-arg","locations":[{"start":{"line":129,"column":29},"end":{"line":129,"column":33}}],"line":129},"27":{"loc":{"start":{"line":131,"column":8},"end":{"line":136,"column":9}},"type":"if","locations":[{"start":{"line":131,"column":8},"end":{"line":136,"column":9}},{"start":{"line":131,"column":8},"end":{"line":136,"column":9}}],"line":131},"28":{"loc":{"start":{"line":143,"column":8},"end":{"line":148,"column":9}},"type":"if","locations":[{"start":{"line":143,"column":8},"end":{"line":148,"column":9}},{"start":{"line":143,"column":8},"end":{"line":148,"column":9}}],"line":143}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0},"b":{"0":[0],"1":[0,0],"2":[0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0],"24":[0,0],"25":[0,0],"26":[0],"27":[0,0],"28":[0,0]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/mutations/recipe.ts","sources":["/usr/local/src/appetized-server/src/schema/mutations/recipe.ts"],"names":[],"mappings":"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","sourcesContent":["import { prisma } from \"../../prisma\";\n\nexport default {\n  createRecipe: async (\n    _ = null,\n    {\n      recipe,\n    }: {\n      recipe: {\n        name: string;\n        description?: string;\n        category?: string;\n        cuisine?: string;\n        cookTime?: number;\n        prepTime?: number;\n      };\n    },\n    args: { id: string }\n  ) => {\n    // Check if user is authenticated\n    if (!args.id) {\n      return {\n        code: 401,\n        message: \"You must be logged in to perform this action\",\n      };\n    }\n\n    // Create recipe\n    return await prisma.recipe.create({\n      data: {\n        ...recipe,\n        author: {\n          connect: {\n            id: args.id,\n          },\n        },\n      },\n    });\n  },\n  editRecipe: async (\n    _ = null,\n    {\n      id,\n      recipe,\n    }: {\n      id: string;\n      recipe: {\n        name: string;\n        description?: string;\n        category?: string;\n        cuisine?: string;\n        cookTime?: number;\n        prepTime?: number;\n      };\n    },\n    args: { id: string }\n  ) => {\n    // Check if user is authenticated\n    if (!args.id) {\n      return {\n        code: 401,\n        message: \"You must be logged in to perform this action\",\n      };\n    }\n\n    // Check if recipe exists\n    const recipeExists = await prisma.recipe.findUnique({\n      where: {\n        id: id,\n      },\n    });\n\n    if (!recipeExists) {\n      return {\n        code: 404,\n        message: \"Recipe not found\",\n      };\n    }\n\n    if (recipeExists?.authorId !== args?.id) {\n      return {\n        code: 403,\n        message: \"You are not authorized to edit this recipe\",\n      };\n    }\n\n    if (recipeExists?.authorId !== args?.id) {\n      return {};\n    }\n\n    // Update recipe\n    return await prisma.recipe.update({\n      where: {\n        id,\n      },\n      data: {\n        ...recipe,\n      },\n    });\n  },\n  deleteRecipe: async (\n    _ = null,\n    { id }: { id: string },\n    args: { id: string }\n  ) => {\n    // Check if user is authenticated\n    if (!args.id) {\n      return {\n        code: 401,\n        message: \"You must be logged in to perform this action\",\n      };\n    }\n\n    // Check if recipe exists\n    const recipeExists = await prisma.recipe.findUnique({\n      where: {\n        id: id,\n      },\n      select: {\n        authorId: true,\n      },\n    });\n\n    if (!recipeExists) {\n      return {\n        code: 404,\n        message: \"Recipe not found\",\n      };\n    }\n\n    if (recipeExists?.authorId !== args?.id) {\n      return {\n        code: 403,\n        message: \"You are not authorized to edit this recipe\",\n      };\n    }\n\n    // Update recipe\n    return await prisma.recipe.delete({\n      where: {\n        id,\n      },\n    });\n  },\n  saveRecipe: async (\n    _ = null,\n    { id }: { id: string },\n    args: { id: string }\n  ) => {\n    // Check if user is authenticated\n    if (!args.id) {\n      return {\n        code: 401,\n        message: \"You must be logged in to perform this action\",\n      };\n    }\n\n    // Check if recipe exists\n    const recipeExists = await prisma.recipe.findUnique({\n      where: {\n        id: id,\n      },\n    });\n\n    if (!recipeExists) {\n      return {\n        code: 404,\n        message: \"Recipe not found\",\n      };\n    }\n\n    await prisma.user.update({\n      where: {\n        id: args.id,\n      },\n      data: {\n        saved: {\n          connect: {\n            id: id,\n          },\n        },\n      },\n    });\n    return recipeExists;\n  },\n  unsaveRecipe: async (\n    _ = null,\n    { id }: { id: string },\n    args: { id: string }\n  ) => {\n    // Check if user is authenticated\n    if (!args.id) {\n      return {\n        code: 401,\n        message: \"You must be logged in to perform this action\",\n      };\n    }\n\n    // Check if recipe exists\n    const recipeExists = await prisma.recipe.findUnique({\n      where: {\n        id: id,\n      },\n    });\n\n    if (!recipeExists) {\n      return {\n        code: 404,\n        message: \"Recipe not found\",\n      };\n    }\n\n    await prisma.user.update({\n      where: {\n        id: args.id,\n      },\n      data: {\n        saved: {\n          disconnect: {\n            id: id,\n          },\n        },\n      },\n    });\n    return recipeExists;\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8bc8798b8f6fab39985f96b246f3881c2843ff37","contentHash":"e8d664a4cab825ea75892048f0f52668869dc70d829ce0164b89cfad1d9cd067"},"/usr/local/src/appetized-server/src/schema/mutations/ingredient.ts":{"path":"/usr/local/src/appetized-server/src/schema/mutations/ingredient.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":0},"end":{"line":120,"column":2}},"3":{"start":{"line":7,"column":8},"end":{"line":12,"column":9}},"4":{"start":{"line":8,"column":12},"end":{"line":11,"column":14}},"5":{"start":{"line":14,"column":29},"end":{"line":21,"column":10}},"6":{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},"7":{"start":{"line":23,"column":12},"end":{"line":26,"column":14}},"8":{"start":{"line":29,"column":8},"end":{"line":35,"column":11}},"9":{"start":{"line":40,"column":8},"end":{"line":45,"column":9}},"10":{"start":{"line":41,"column":12},"end":{"line":44,"column":14}},"11":{"start":{"line":47,"column":29},"end":{"line":58,"column":10}},"12":{"start":{"line":59,"column":8},"end":{"line":64,"column":9}},"13":{"start":{"line":60,"column":12},"end":{"line":63,"column":14}},"14":{"start":{"line":65,"column":8},"end":{"line":70,"column":9}},"15":{"start":{"line":66,"column":12},"end":{"line":69,"column":14}},"16":{"start":{"line":72,"column":8},"end":{"line":77,"column":11}},"17":{"start":{"line":82,"column":8},"end":{"line":87,"column":9}},"18":{"start":{"line":83,"column":12},"end":{"line":86,"column":14}},"19":{"start":{"line":89,"column":29},"end":{"line":100,"column":10}},"20":{"start":{"line":101,"column":8},"end":{"line":106,"column":9}},"21":{"start":{"line":102,"column":12},"end":{"line":105,"column":14}},"22":{"start":{"line":107,"column":8},"end":{"line":112,"column":9}},"23":{"start":{"line":108,"column":12},"end":{"line":111,"column":14}},"24":{"start":{"line":114,"column":8},"end":{"line":118,"column":11}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":22},"end":{"line":5,"column":23}},"loc":{"start":{"line":5,"column":73},"end":{"line":36,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":37,"column":20},"end":{"line":37,"column":21}},"loc":{"start":{"line":37,"column":67},"end":{"line":78,"column":5}},"line":37},"2":{"name":"(anonymous_2)","decl":{"start":{"line":79,"column":22},"end":{"line":79,"column":23}},"loc":{"start":{"line":79,"column":56},"end":{"line":119,"column":5}},"line":79}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":29},"end":{"line":5,"column":37}},"type":"default-arg","locations":[{"start":{"line":5,"column":33},"end":{"line":5,"column":37}}],"line":5},"1":{"loc":{"start":{"line":7,"column":8},"end":{"line":12,"column":9}},"type":"if","locations":[{"start":{"line":7,"column":8},"end":{"line":12,"column":9}},{"start":{"line":7,"column":8},"end":{"line":12,"column":9}}],"line":7},"2":{"loc":{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},{"start":{"line":22,"column":8},"end":{"line":27,"column":9}}],"line":22},"3":{"loc":{"start":{"line":37,"column":27},"end":{"line":37,"column":35}},"type":"default-arg","locations":[{"start":{"line":37,"column":31},"end":{"line":37,"column":35}}],"line":37},"4":{"loc":{"start":{"line":40,"column":8},"end":{"line":45,"column":9}},"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":45,"column":9}},{"start":{"line":40,"column":8},"end":{"line":45,"column":9}}],"line":40},"5":{"loc":{"start":{"line":59,"column":8},"end":{"line":64,"column":9}},"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":64,"column":9}},{"start":{"line":59,"column":8},"end":{"line":64,"column":9}}],"line":59},"6":{"loc":{"start":{"line":65,"column":8},"end":{"line":70,"column":9}},"type":"if","locations":[{"start":{"line":65,"column":8},"end":{"line":70,"column":9}},{"start":{"line":65,"column":8},"end":{"line":70,"column":9}}],"line":65},"7":{"loc":{"start":{"line":65,"column":13},"end":{"line":65,"column":148}},"type":"cond-expr","locations":[{"start":{"line":65,"column":128},"end":{"line":65,"column":134}},{"start":{"line":65,"column":137},"end":{"line":65,"column":148}}],"line":65},"8":{"loc":{"start":{"line":65,"column":13},"end":{"line":65,"column":125}},"type":"binary-expr","locations":[{"start":{"line":65,"column":13},"end":{"line":65,"column":108}},{"start":{"line":65,"column":112},"end":{"line":65,"column":125}}],"line":65},"9":{"loc":{"start":{"line":65,"column":19},"end":{"line":65,"column":98}},"type":"cond-expr","locations":[{"start":{"line":65,"column":70},"end":{"line":65,"column":76}},{"start":{"line":65,"column":79},"end":{"line":65,"column":98}}],"line":65},"10":{"loc":{"start":{"line":65,"column":19},"end":{"line":65,"column":67}},"type":"binary-expr","locations":[{"start":{"line":65,"column":19},"end":{"line":65,"column":40}},{"start":{"line":65,"column":44},"end":{"line":65,"column":67}}],"line":65},"11":{"loc":{"start":{"line":65,"column":155},"end":{"line":65,"column":206}},"type":"cond-expr","locations":[{"start":{"line":65,"column":190},"end":{"line":65,"column":196}},{"start":{"line":65,"column":199},"end":{"line":65,"column":206}}],"line":65},"12":{"loc":{"start":{"line":65,"column":155},"end":{"line":65,"column":187}},"type":"binary-expr","locations":[{"start":{"line":65,"column":155},"end":{"line":65,"column":168}},{"start":{"line":65,"column":172},"end":{"line":65,"column":187}}],"line":65},"13":{"loc":{"start":{"line":79,"column":29},"end":{"line":79,"column":37}},"type":"default-arg","locations":[{"start":{"line":79,"column":33},"end":{"line":79,"column":37}}],"line":79},"14":{"loc":{"start":{"line":82,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":82,"column":8},"end":{"line":87,"column":9}},{"start":{"line":82,"column":8},"end":{"line":87,"column":9}}],"line":82},"15":{"loc":{"start":{"line":101,"column":8},"end":{"line":106,"column":9}},"type":"if","locations":[{"start":{"line":101,"column":8},"end":{"line":106,"column":9}},{"start":{"line":101,"column":8},"end":{"line":106,"column":9}}],"line":101},"16":{"loc":{"start":{"line":107,"column":8},"end":{"line":112,"column":9}},"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":112,"column":9}},{"start":{"line":107,"column":8},"end":{"line":112,"column":9}}],"line":107},"17":{"loc":{"start":{"line":107,"column":13},"end":{"line":107,"column":148}},"type":"cond-expr","locations":[{"start":{"line":107,"column":128},"end":{"line":107,"column":134}},{"start":{"line":107,"column":137},"end":{"line":107,"column":148}}],"line":107},"18":{"loc":{"start":{"line":107,"column":13},"end":{"line":107,"column":125}},"type":"binary-expr","locations":[{"start":{"line":107,"column":13},"end":{"line":107,"column":108}},{"start":{"line":107,"column":112},"end":{"line":107,"column":125}}],"line":107},"19":{"loc":{"start":{"line":107,"column":19},"end":{"line":107,"column":98}},"type":"cond-expr","locations":[{"start":{"line":107,"column":70},"end":{"line":107,"column":76}},{"start":{"line":107,"column":79},"end":{"line":107,"column":98}}],"line":107},"20":{"loc":{"start":{"line":107,"column":19},"end":{"line":107,"column":67}},"type":"binary-expr","locations":[{"start":{"line":107,"column":19},"end":{"line":107,"column":40}},{"start":{"line":107,"column":44},"end":{"line":107,"column":67}}],"line":107},"21":{"loc":{"start":{"line":107,"column":155},"end":{"line":107,"column":206}},"type":"cond-expr","locations":[{"start":{"line":107,"column":190},"end":{"line":107,"column":196}},{"start":{"line":107,"column":199},"end":{"line":107,"column":206}}],"line":107},"22":{"loc":{"start":{"line":107,"column":155},"end":{"line":107,"column":187}},"type":"binary-expr","locations":[{"start":{"line":107,"column":155},"end":{"line":107,"column":168}},{"start":{"line":107,"column":172},"end":{"line":107,"column":187}}],"line":107}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"f":{"0":0,"1":0,"2":0},"b":{"0":[0],"1":[0,0],"2":[0,0],"3":[0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/mutations/ingredient.ts","sources":["/usr/local/src/appetized-server/src/schema/mutations/ingredient.ts"],"names":[],"mappings":"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","sourcesContent":["import { prisma } from \"../../prisma\";\n\nexport default {\n  createIngredient: async (\n    _ = null,\n    {\n      recipe,\n      ingredient,\n    }: { recipe: string; ingredient: { name: string; quantity: string } },\n    args: { id: string }\n  ) => {\n    // Check if user is authenticated\n    if (!args.id) {\n      return {\n        code: 401,\n        message: \"You must be logged in to perform this action\",\n      };\n    }\n\n    // Check if recipe exists\n    const recipeExists = await prisma.recipe.findMany({\n      where: {\n        id: recipe,\n        author: {\n          id: args.id,\n        },\n      },\n    });\n\n    if (recipeExists.length === 0) {\n      return {\n        code: 404,\n        message: \"Recipe not found\",\n      };\n    }\n\n    // Create ingredient\n    return await prisma.ingredient.create({\n      data: {\n        ...ingredient,\n        recipe: {\n          connect: {\n            id: recipe,\n          },\n        },\n      },\n    });\n  },\n  editIngredient: async (\n    _ = null,\n    {\n      id,\n      ingredient,\n    }: { id: string; ingredient: { name: string; quantity: string } },\n    args: { id: string }\n  ) => {\n    // Check if user is authenticated\n    if (!args.id) {\n      return {\n        code: 401,\n        message: \"You must be logged in to perform this action\",\n      };\n    }\n\n    // Check if ingredient exists\n    const recipeExists = await prisma.ingredient.findUnique({\n      where: {\n        id: id,\n      },\n      select: {\n        recipe: {\n          select: {\n            authorId: true,\n          },\n        },\n      },\n    });\n\n    if (!recipeExists) {\n      return {\n        code: 404,\n        message: \"Ingredient not found\",\n      };\n    }\n\n    if (recipeExists?.recipe?.authorId !== args?.id) {\n      return {\n        code: 403,\n        message: \"You are not authorized to edit this ingredient\",\n      };\n    }\n\n    // Update ingredient\n    return await prisma.ingredient.update({\n      where: {\n        id,\n      },\n      data: {\n        ...ingredient,\n      },\n    });\n  },\n  deleteIngredient: async (\n    _ = null,\n    { id }: { id: string },\n    args: { id: string }\n  ) => {\n    // Check if user is authenticated\n    if (!args.id) {\n      return {\n        code: 401,\n        message: \"You must be logged in to perform this action\",\n      };\n    }\n\n    // Check if ingredient exists\n    const recipeExists = await prisma.ingredient.findUnique({\n      where: {\n        id: id,\n      },\n      select: {\n        recipe: {\n          select: {\n            authorId: true,\n          },\n        },\n      },\n    });\n\n    if (!recipeExists) {\n      return {\n        code: 404,\n        message: \"Ingredient not found\",\n      };\n    }\n\n    if (recipeExists?.recipe?.authorId !== args?.id) {\n      return {\n        code: 403,\n        message: \"You are not authorized to edit this ingredient\",\n      };\n    }\n\n    // Update ingredient\n    return await prisma.ingredient.delete({\n      where: {\n        id,\n      },\n    });\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"631629fa1fa91e1792f0c82f80f8abc9bbbb905c","contentHash":"c140468d6f246296d1e5b6472c90b9f5ee5b4e338ae937bbf984962f7a48b4f2"},"/usr/local/src/appetized-server/src/schema/mutations/step.ts":{"path":"/usr/local/src/appetized-server/src/schema/mutations/step.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":0},"end":{"line":120,"column":2}},"3":{"start":{"line":7,"column":8},"end":{"line":12,"column":9}},"4":{"start":{"line":8,"column":12},"end":{"line":11,"column":14}},"5":{"start":{"line":14,"column":29},"end":{"line":21,"column":10}},"6":{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},"7":{"start":{"line":23,"column":12},"end":{"line":26,"column":14}},"8":{"start":{"line":29,"column":8},"end":{"line":35,"column":11}},"9":{"start":{"line":40,"column":8},"end":{"line":45,"column":9}},"10":{"start":{"line":41,"column":12},"end":{"line":44,"column":14}},"11":{"start":{"line":47,"column":29},"end":{"line":58,"column":10}},"12":{"start":{"line":59,"column":8},"end":{"line":64,"column":9}},"13":{"start":{"line":60,"column":12},"end":{"line":63,"column":14}},"14":{"start":{"line":65,"column":8},"end":{"line":70,"column":9}},"15":{"start":{"line":66,"column":12},"end":{"line":69,"column":14}},"16":{"start":{"line":72,"column":8},"end":{"line":77,"column":11}},"17":{"start":{"line":82,"column":8},"end":{"line":87,"column":9}},"18":{"start":{"line":83,"column":12},"end":{"line":86,"column":14}},"19":{"start":{"line":89,"column":29},"end":{"line":100,"column":10}},"20":{"start":{"line":101,"column":8},"end":{"line":106,"column":9}},"21":{"start":{"line":102,"column":12},"end":{"line":105,"column":14}},"22":{"start":{"line":107,"column":8},"end":{"line":112,"column":9}},"23":{"start":{"line":108,"column":12},"end":{"line":111,"column":14}},"24":{"start":{"line":114,"column":8},"end":{"line":118,"column":11}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":16},"end":{"line":5,"column":17}},"loc":{"start":{"line":5,"column":61},"end":{"line":36,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":37,"column":14},"end":{"line":37,"column":15}},"loc":{"start":{"line":37,"column":54},"end":{"line":78,"column":5}},"line":37},"2":{"name":"(anonymous_2)","decl":{"start":{"line":79,"column":16},"end":{"line":79,"column":17}},"loc":{"start":{"line":79,"column":50},"end":{"line":119,"column":5}},"line":79}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":23},"end":{"line":5,"column":31}},"type":"default-arg","locations":[{"start":{"line":5,"column":27},"end":{"line":5,"column":31}}],"line":5},"1":{"loc":{"start":{"line":7,"column":8},"end":{"line":12,"column":9}},"type":"if","locations":[{"start":{"line":7,"column":8},"end":{"line":12,"column":9}},{"start":{"line":7,"column":8},"end":{"line":12,"column":9}}],"line":7},"2":{"loc":{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},{"start":{"line":22,"column":8},"end":{"line":27,"column":9}}],"line":22},"3":{"loc":{"start":{"line":37,"column":21},"end":{"line":37,"column":29}},"type":"default-arg","locations":[{"start":{"line":37,"column":25},"end":{"line":37,"column":29}}],"line":37},"4":{"loc":{"start":{"line":40,"column":8},"end":{"line":45,"column":9}},"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":45,"column":9}},{"start":{"line":40,"column":8},"end":{"line":45,"column":9}}],"line":40},"5":{"loc":{"start":{"line":59,"column":8},"end":{"line":64,"column":9}},"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":64,"column":9}},{"start":{"line":59,"column":8},"end":{"line":64,"column":9}}],"line":59},"6":{"loc":{"start":{"line":65,"column":8},"end":{"line":70,"column":9}},"type":"if","locations":[{"start":{"line":65,"column":8},"end":{"line":70,"column":9}},{"start":{"line":65,"column":8},"end":{"line":70,"column":9}}],"line":65},"7":{"loc":{"start":{"line":65,"column":13},"end":{"line":65,"column":148}},"type":"cond-expr","locations":[{"start":{"line":65,"column":128},"end":{"line":65,"column":134}},{"start":{"line":65,"column":137},"end":{"line":65,"column":148}}],"line":65},"8":{"loc":{"start":{"line":65,"column":13},"end":{"line":65,"column":125}},"type":"binary-expr","locations":[{"start":{"line":65,"column":13},"end":{"line":65,"column":108}},{"start":{"line":65,"column":112},"end":{"line":65,"column":125}}],"line":65},"9":{"loc":{"start":{"line":65,"column":19},"end":{"line":65,"column":98}},"type":"cond-expr","locations":[{"start":{"line":65,"column":70},"end":{"line":65,"column":76}},{"start":{"line":65,"column":79},"end":{"line":65,"column":98}}],"line":65},"10":{"loc":{"start":{"line":65,"column":19},"end":{"line":65,"column":67}},"type":"binary-expr","locations":[{"start":{"line":65,"column":19},"end":{"line":65,"column":40}},{"start":{"line":65,"column":44},"end":{"line":65,"column":67}}],"line":65},"11":{"loc":{"start":{"line":65,"column":155},"end":{"line":65,"column":206}},"type":"cond-expr","locations":[{"start":{"line":65,"column":190},"end":{"line":65,"column":196}},{"start":{"line":65,"column":199},"end":{"line":65,"column":206}}],"line":65},"12":{"loc":{"start":{"line":65,"column":155},"end":{"line":65,"column":187}},"type":"binary-expr","locations":[{"start":{"line":65,"column":155},"end":{"line":65,"column":168}},{"start":{"line":65,"column":172},"end":{"line":65,"column":187}}],"line":65},"13":{"loc":{"start":{"line":79,"column":23},"end":{"line":79,"column":31}},"type":"default-arg","locations":[{"start":{"line":79,"column":27},"end":{"line":79,"column":31}}],"line":79},"14":{"loc":{"start":{"line":82,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":82,"column":8},"end":{"line":87,"column":9}},{"start":{"line":82,"column":8},"end":{"line":87,"column":9}}],"line":82},"15":{"loc":{"start":{"line":101,"column":8},"end":{"line":106,"column":9}},"type":"if","locations":[{"start":{"line":101,"column":8},"end":{"line":106,"column":9}},{"start":{"line":101,"column":8},"end":{"line":106,"column":9}}],"line":101},"16":{"loc":{"start":{"line":107,"column":8},"end":{"line":112,"column":9}},"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":112,"column":9}},{"start":{"line":107,"column":8},"end":{"line":112,"column":9}}],"line":107},"17":{"loc":{"start":{"line":107,"column":13},"end":{"line":107,"column":148}},"type":"cond-expr","locations":[{"start":{"line":107,"column":128},"end":{"line":107,"column":134}},{"start":{"line":107,"column":137},"end":{"line":107,"column":148}}],"line":107},"18":{"loc":{"start":{"line":107,"column":13},"end":{"line":107,"column":125}},"type":"binary-expr","locations":[{"start":{"line":107,"column":13},"end":{"line":107,"column":108}},{"start":{"line":107,"column":112},"end":{"line":107,"column":125}}],"line":107},"19":{"loc":{"start":{"line":107,"column":19},"end":{"line":107,"column":98}},"type":"cond-expr","locations":[{"start":{"line":107,"column":70},"end":{"line":107,"column":76}},{"start":{"line":107,"column":79},"end":{"line":107,"column":98}}],"line":107},"20":{"loc":{"start":{"line":107,"column":19},"end":{"line":107,"column":67}},"type":"binary-expr","locations":[{"start":{"line":107,"column":19},"end":{"line":107,"column":40}},{"start":{"line":107,"column":44},"end":{"line":107,"column":67}}],"line":107},"21":{"loc":{"start":{"line":107,"column":155},"end":{"line":107,"column":206}},"type":"cond-expr","locations":[{"start":{"line":107,"column":190},"end":{"line":107,"column":196}},{"start":{"line":107,"column":199},"end":{"line":107,"column":206}}],"line":107},"22":{"loc":{"start":{"line":107,"column":155},"end":{"line":107,"column":187}},"type":"binary-expr","locations":[{"start":{"line":107,"column":155},"end":{"line":107,"column":168}},{"start":{"line":107,"column":172},"end":{"line":107,"column":187}}],"line":107}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"f":{"0":0,"1":0,"2":0},"b":{"0":[0],"1":[0,0],"2":[0,0],"3":[0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/mutations/step.ts","sources":["/usr/local/src/appetized-server/src/schema/mutations/step.ts"],"names":[],"mappings":"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","sourcesContent":["import { prisma } from \"../../prisma\";\n\nexport default {\n  createStep: async (\n    _ = null,\n    {\n      recipe,\n      step,\n    }: { recipe: string; step: { name?: string; content: string } },\n    args: { id: string }\n  ) => {\n    // Check if user is authenticated\n    if (!args.id) {\n      return {\n        code: 401,\n        message: \"You must be logged in to perform this action\",\n      };\n    }\n\n    // Check if recipe exists\n    const recipeExists = await prisma.recipe.findMany({\n      where: {\n        id: recipe,\n        author: {\n          id: args.id,\n        },\n      },\n    });\n\n    if (recipeExists.length === 0) {\n      return {\n        code: 404,\n        message: \"Recipe not found\",\n      };\n    }\n\n    // Create step\n    return await prisma.step.create({\n      data: {\n        ...step,\n        recipe: {\n          connect: {\n            id: recipe,\n          },\n        },\n      },\n    });\n  },\n  editStep: async (\n    _ = null,\n    { id, step }: { id: string; step: { name?: string; content: string } },\n    args: { id: string }\n  ) => {\n    // Check if user is authenticated\n    if (!args.id) {\n      return {\n        code: 401,\n        message: \"You must be logged in to perform this action\",\n      };\n    }\n\n    // Check if step exists\n    const recipeExists = await prisma.step.findUnique({\n      where: {\n        id: id,\n      },\n      select: {\n        recipe: {\n          select: {\n            authorId: true,\n          },\n        },\n      },\n    });\n\n    if (!recipeExists) {\n      return {\n        code: 404,\n        message: \"Step not found\",\n      };\n    }\n\n    if (recipeExists?.recipe?.authorId !== args?.id) {\n      return {\n        code: 403,\n        message: \"You are not authorized to edit this step\",\n      };\n    }\n\n    // Update step\n    return await prisma.step.update({\n      where: {\n        id,\n      },\n      data: {\n        ...step,\n      },\n    });\n  },\n  deleteStep: async (\n    _ = null,\n    { id }: { id: string },\n    args: { id: string }\n  ) => {\n    // Check if user is authenticated\n    if (!args.id) {\n      return {\n        code: 401,\n        message: \"You must be logged in to perform this action\",\n      };\n    }\n\n    // Check if step exists\n    const recipeExists = await prisma.step.findUnique({\n      where: {\n        id: id,\n      },\n      select: {\n        recipe: {\n          select: {\n            authorId: true,\n          },\n        },\n      },\n    });\n\n    if (!recipeExists) {\n      return {\n        code: 404,\n        message: \"Step not found\",\n      };\n    }\n\n    if (recipeExists?.recipe?.authorId !== args?.id) {\n      return {\n        code: 403,\n        message: \"You are not authorized to edit this step\",\n      };\n    }\n\n    // Update step\n    return await prisma.step.delete({\n      where: {\n        id,\n      },\n    });\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1932aae0b7fba6fd6dce93d8642f81194d8b802a","contentHash":"9bc92fd34b8d8ce70bb9287c0bc23983fd1b1829675ea40d43c2b8f4eb75648a"},"/usr/local/src/appetized-server/src/schema/user.ts":{"path":"/usr/local/src/appetized-server/src/schema/user.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":57,"column":2}},"3":{"start":{"line":6,"column":8},"end":{"line":13,"column":11}},"4":{"start":{"line":16,"column":8},"end":{"line":27,"column":11}},"5":{"start":{"line":30,"column":8},"end":{"line":41,"column":11}},"6":{"start":{"line":44,"column":8},"end":{"line":55,"column":11}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":13},"end":{"line":5,"column":14}},"loc":{"start":{"line":5,"column":53},"end":{"line":14,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":18},"end":{"line":15,"column":19}},"loc":{"start":{"line":15,"column":58},"end":{"line":28,"column":5}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":29,"column":15},"end":{"line":29,"column":16}},"loc":{"start":{"line":29,"column":55},"end":{"line":42,"column":5}},"line":29},"3":{"name":"(anonymous_3)","decl":{"start":{"line":43,"column":15},"end":{"line":43,"column":16}},"loc":{"start":{"line":43,"column":55},"end":{"line":56,"column":5}},"line":43}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":20},"end":{"line":11,"column":51}},"type":"cond-expr","locations":[{"start":{"line":11,"column":27},"end":{"line":11,"column":39}},{"start":{"line":11,"column":42},"end":{"line":11,"column":51}}],"line":11},"1":{"loc":{"start":{"line":25,"column":20},"end":{"line":25,"column":51}},"type":"cond-expr","locations":[{"start":{"line":25,"column":27},"end":{"line":25,"column":39}},{"start":{"line":25,"column":42},"end":{"line":25,"column":51}}],"line":25},"2":{"loc":{"start":{"line":39,"column":20},"end":{"line":39,"column":51}},"type":"cond-expr","locations":[{"start":{"line":39,"column":27},"end":{"line":39,"column":39}},{"start":{"line":39,"column":42},"end":{"line":39,"column":51}}],"line":39},"3":{"loc":{"start":{"line":53,"column":20},"end":{"line":53,"column":51}},"type":"cond-expr","locations":[{"start":{"line":53,"column":27},"end":{"line":53,"column":39}},{"start":{"line":53,"column":42},"end":{"line":53,"column":51}}],"line":53}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/user.ts","sources":["/usr/local/src/appetized-server/src/schema/user.ts"],"names":[],"mappings":";;AAAA,sCAAmC;AAEnC,kBAAe;IACb,OAAO,EAAE,KAAK,EACZ,MAAW,EACX,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAA6C,EAC/D,EAAE;QACF,OAAO,MAAM,eAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;YAClC,KAAK,EAAE;gBACL,QAAQ,EAAE,MAAM,CAAC,EAAE;aACpB;YACD,IAAI;YACJ,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS;YACvC,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC;IAED,YAAY,EAAE,KAAK,EACjB,MAAW,EACX,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAA6C,EAC/D,EAAE;QACF,OAAO,MAAM,eAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;YAClC,KAAK,EAAE;gBACL,OAAO,EAAE;oBACP,IAAI,EAAE;wBACJ,EAAE,EAAE,MAAM,CAAC,EAAE;qBACd;iBACF;aACF;YACD,IAAI;YACJ,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS;YACvC,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC;IAED,SAAS,EAAE,KAAK,EACd,MAAW,EACX,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAA6C,EAC/D,EAAE;QACF,OAAO,MAAM,eAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YAChC,KAAK,EAAE;gBACL,SAAS,EAAE;oBACT,IAAI,EAAE;wBACJ,EAAE,EAAE,MAAM,CAAC,EAAE;qBACd;iBACF;aACF;YACD,IAAI;YACJ,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS;YACvC,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC;IAED,SAAS,EAAE,KAAK,EACd,MAAW,EACX,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAA6C,EAC/D,EAAE;QACF,OAAO,MAAM,eAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YAChC,KAAK,EAAE;gBACL,SAAS,EAAE;oBACT,IAAI,EAAE;wBACJ,EAAE,EAAE,MAAM,CAAC,EAAE;qBACd;iBACF;aACF;YACD,IAAI;YACJ,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS;YACvC,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC;CACF,CAAC","sourcesContent":["import { prisma } from \"../prisma\";\n\nexport default {\n  recipes: async (\n    parent: any,\n    { take, from, sort }: { take: number; from: string; sort: any }\n  ) => {\n    return await prisma.recipe.findMany({\n      where: {\n        authorId: parent.id,\n      },\n      take,\n      cursor: from ? { id: from } : undefined,\n      orderBy: sort,\n    });\n  },\n\n  savedRecipes: async (\n    parent: any,\n    { take, from, sort }: { take: number; from: string; sort: any }\n  ) => {\n    return await prisma.recipe.findMany({\n      where: {\n        savedBy: {\n          some: {\n            id: parent.id,\n          },\n        },\n      },\n      take,\n      cursor: from ? { id: from } : undefined,\n      orderBy: sort,\n    });\n  },\n\n  followers: async (\n    parent: any,\n    { take, from, sort }: { take: number; from: string; sort: any }\n  ) => {\n    return await prisma.user.findMany({\n      where: {\n        following: {\n          some: {\n            id: parent.id,\n          },\n        },\n      },\n      take,\n      cursor: from ? { id: from } : undefined,\n      orderBy: sort,\n    });\n  },\n\n  following: async (\n    parent: any,\n    { take, from, sort }: { take: number; from: string; sort: any }\n  ) => {\n    return await prisma.user.findMany({\n      where: {\n        followers: {\n          some: {\n            id: parent.id,\n          },\n        },\n      },\n      take,\n      cursor: from ? { id: from } : undefined,\n      orderBy: sort,\n    });\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bbf4551834a427cd16be671a999bb3c156d3e2d3","contentHash":"085d2a5a2b32656e8c4226ccfe50d343d90b11029ed596f3a81f884ad1a920fc"},"/usr/local/src/appetized-server/src/schema/recipe.ts":{"path":"/usr/local/src/appetized-server/src/schema/recipe.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":43,"column":2}},"3":{"start":{"line":6,"column":8},"end":{"line":15,"column":11}},"4":{"start":{"line":18,"column":8},"end":{"line":27,"column":11}},"5":{"start":{"line":30,"column":8},"end":{"line":41,"column":11}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":11},"end":{"line":5,"column":12}},"loc":{"start":{"line":5,"column":51},"end":{"line":16,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":17},"end":{"line":17,"column":18}},"loc":{"start":{"line":17,"column":57},"end":{"line":28,"column":5}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":29,"column":13},"end":{"line":29,"column":14}},"loc":{"start":{"line":29,"column":53},"end":{"line":42,"column":5}},"line":29}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":20},"end":{"line":13,"column":51}},"type":"cond-expr","locations":[{"start":{"line":13,"column":27},"end":{"line":13,"column":39}},{"start":{"line":13,"column":42},"end":{"line":13,"column":51}}],"line":13},"1":{"loc":{"start":{"line":25,"column":20},"end":{"line":25,"column":51}},"type":"cond-expr","locations":[{"start":{"line":25,"column":27},"end":{"line":25,"column":39}},{"start":{"line":25,"column":42},"end":{"line":25,"column":51}}],"line":25},"2":{"loc":{"start":{"line":39,"column":20},"end":{"line":39,"column":51}},"type":"cond-expr","locations":[{"start":{"line":39,"column":27},"end":{"line":39,"column":39}},{"start":{"line":39,"column":42},"end":{"line":39,"column":51}}],"line":39}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"/usr/local/src/appetized-server/src/schema/recipe.ts","sources":["/usr/local/src/appetized-server/src/schema/recipe.ts"],"names":[],"mappings":";;AAAA,sCAAmC;AAEnC,kBAAe;IACb,KAAK,EAAE,KAAK,EACV,MAAW,EACX,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAA6C,EAC/D,EAAE;QACF,OAAO,MAAM,eAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YAChC,KAAK,EAAE;gBACL,MAAM,EAAE;oBACN,EAAE,EAAE,MAAM,CAAC,EAAE;iBACd;aACF;YACD,IAAI;YACJ,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS;YACvC,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC;IACD,WAAW,EAAE,KAAK,EAChB,MAAW,EACX,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAA6C,EAC/D,EAAE;QACF,OAAO,MAAM,eAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;YACtC,KAAK,EAAE;gBACL,MAAM,EAAE;oBACN,EAAE,EAAE,MAAM,CAAC,EAAE;iBACd;aACF;YACD,IAAI;YACJ,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS;YACvC,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC;IACD,OAAO,EAAE,KAAK,EACZ,MAAW,EACX,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAA6C,EAC/D,EAAE;QACF,OAAO,MAAM,eAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YAChC,KAAK,EAAE;gBACL,KAAK,EAAE;oBACL,IAAI,EAAE;wBACJ,EAAE,EAAE,MAAM,CAAC,EAAE;qBACd;iBACF;aACF;YACD,IAAI;YACJ,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS;YACvC,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC;CACF,CAAC","sourcesContent":["import { prisma } from \"../prisma\";\n\nexport default {\n  steps: async (\n    parent: any,\n    { take, from, sort }: { take: number; from: string; sort: any }\n  ) => {\n    return await prisma.step.findMany({\n      where: {\n        recipe: {\n          id: parent.id,\n        },\n      },\n      take,\n      cursor: from ? { id: from } : undefined,\n      orderBy: sort,\n    });\n  },\n  ingredients: async (\n    parent: any,\n    { take, from, sort }: { take: number; from: string; sort: any }\n  ) => {\n    return await prisma.ingredient.findMany({\n      where: {\n        recipe: {\n          id: parent.id,\n        },\n      },\n      take,\n      cursor: from ? { id: from } : undefined,\n      orderBy: sort,\n    });\n  },\n  savedBy: async (\n    parent: any,\n    { take, from, sort }: { take: number; from: string; sort: any }\n  ) => {\n    return await prisma.user.findMany({\n      where: {\n        saved: {\n          some: {\n            id: parent.id,\n          },\n        },\n      },\n      take,\n      cursor: from ? { id: from } : undefined,\n      orderBy: sort,\n    });\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5abe9b06f985dc97c915b6fdbcfc6def591ad179","contentHash":"f6b812e22bfc064c0a59a8b501387d8d955e79ff48a0f750efc8a404f307c54c"}}